import{a5 as W,r,a0 as D,ad as H,j as e,K as o,a4 as K,E as b,P as X,T as q,X as G,N as y,$ as J}from"./index-C8U9GYah.js";import{u as Q}from"./usePurchaseOrders-C4m7SL-s.js";import{P as U}from"./PrintablePO-gcpC3pVK.js";import{l as V}from"./index-C07Ut3Us.js";import{P as Y}from"./Print-C1UOfKRw.js";import{C as Z}from"./Container-BBTr0oQb.js";import{T as x,c as ee,d as se,e as te,a as p,b as t,f as ae}from"./TextField-4JpomR0S.js";import{R as re}from"./SearchOutlined-Cj_MhAlx.js";import{M as l}from"./MenuItem-CPhE0Stf.js";import{R as ne}from"./ClearOutlined-BEaw9BxX.js";import{R as le}from"./PlusOutlined-BlScJSsk.js";import{f as ie}from"./format-BzRktsyD.js";import{R as oe}from"./EyeOutlined-BpNihJHx.js";import{T as ce}from"./TablePagination-n60Tvl7p.js";import{S as n}from"./Skeleton-Ddm9mEzV.js";import"./InputLabel-OjEEavQ_.js";import"./KeyboardArrowRight-C3Eeddea.js";import"./LastPage-BlI_OvLj.js";const de={pending:"warning",partially_received:"info",completed:"success",cancelled:"error"},ue=()=>e.jsxs(p,{children:[e.jsx(t,{children:e.jsx(n,{animation:"wave"})}),e.jsx(t,{children:e.jsx(n,{animation:"wave"})}),e.jsx(t,{children:e.jsx(n,{animation:"wave"})}),e.jsx(t,{children:e.jsx(n,{animation:"wave"})}),e.jsx(t,{children:e.jsx(n,{animation:"wave"})}),e.jsx(t,{children:e.jsx(n,{animation:"wave",width:80})}),e.jsx(t,{align:"right",children:e.jsxs(o,{sx:{display:"flex",justifyContent:"flex-end",gap:1},children:[e.jsx(n,{animation:"wave",variant:"circular",width:32,height:32}),e.jsx(n,{animation:"wave",variant:"circular",width:32,height:32})]})})]}),Ie=()=>{const c=W(),[d,j]=r.useState(0),[i,R]=r.useState(10),[u,g]=r.useState(""),[h,S]=r.useState("All Suppliers"),[T,_]=r.useState({}),[A,I]=r.useState(null),[m,f]=r.useState("All Status"),P=r.useRef(),O=D(H),{data:k=[],isLoading:L}=Q(T),z=V.useReactToPrint({contentRef:P}),$=["All Suppliers",...new Set(O.map(s=>s==null?void 0:s.supplier_name))].filter(Boolean),v=k.filter(s=>{var C,w;const a=s.po_number.toLowerCase().includes(u.toLowerCase())||((C=s.supplier)==null?void 0:C.supplier_name.toLowerCase().includes(u.toLowerCase())),E=h==="All Suppliers"||((w=s.supplier)==null?void 0:w.supplier_name)===h,N=m==="All Status"||s.status===m.toLowerCase().replace(" ","_");return a&&E&&N}),B=(s,a)=>{j(a)},F=s=>{R(parseInt(s.target.value,10)),j(0)},M=()=>{g(""),S("All Suppliers"),f("All Status"),_({})};return e.jsxs(Z,{maxWidth:"xxl",sx:{mt:0,px:"0!important"},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,gap:2},children:[e.jsxs(o,{sx:{display:"flex",gap:2,flex:1},children:[e.jsx(x,{placeholder:"Search PO number",variant:"outlined",size:"small",value:u,onChange:s=>g(s.target.value),InputProps:{startAdornment:e.jsx(K,{position:"start",children:e.jsx(re,{})})},sx:{minWidth:200}}),e.jsx(x,{select:!0,size:"small",value:h,onChange:s=>S(s.target.value),label:"Filter by Supplier",sx:{minWidth:200},children:$.map(s=>e.jsx(l,{value:s,children:s},s))}),e.jsxs(x,{select:!0,size:"small",value:m,onChange:s=>f(s.target.value),label:"Filter by Status",sx:{minWidth:200},children:[e.jsx(l,{value:"All Status",children:"All Status"}),e.jsx(l,{value:"Pending",children:"Pending"}),e.jsx(l,{value:"Partially Received",children:"Partially Received"}),e.jsx(l,{value:"Completed",children:"Completed"}),e.jsx(l,{value:"Cancelled",children:"Cancelled"})]})]}),e.jsxs(o,{children:[e.jsx(b,{variant:"text",color:"error",sx:{mr:1},onClick:M,children:e.jsx(ne,{})}),e.jsx(b,{variant:"contained",color:"error",startIcon:e.jsx(le,{}),onClick:()=>c("/app/purchase/create"),children:"Create PO"})]})]}),e.jsx(ee,{component:X,children:e.jsxs(se,{children:[e.jsx(te,{children:e.jsxs(p,{children:[e.jsx(t,{children:"PO Number"}),e.jsx(t,{children:"Date"}),e.jsx(t,{children:"Supplier"}),e.jsx(t,{children:"Total Amount"}),e.jsx(t,{children:"Status"}),e.jsx(t,{align:"right",children:"Actions"})]})}),e.jsx(ae,{children:L?[...Array(i)].map((s,a)=>e.jsx(ue,{},a)):v.slice(d*i,d*i+i).map(s=>{var a;return e.jsxs(p,{children:[e.jsx(t,{onClick:()=>c(`${s.po_number}/edit`),color:"primary",children:e.jsx(q,{color:"primary",children:s.po_number})}),e.jsx(t,{children:ie(new Date(s.po_date),"MMM dd, yyyy")}),e.jsx(t,{children:(a=s.supplier)==null?void 0:a.supplier_name}),e.jsxs(t,{children:["â‚±",Number(s.total_amount).toLocaleString()]}),e.jsx(t,{children:e.jsx(G,{label:s.status.replace("_"," "),color:de[s.status],size:"small"})}),e.jsxs(t,{align:"right",children:[e.jsx(y,{onClick:()=>c(`${s.po_number}/edit`),children:e.jsx(oe,{style:{fontSize:20}})}),e.jsx(J,{title:"Print Purchase Order",children:e.jsx(y,{onClick:()=>{I(s),setTimeout(z,100)},children:e.jsx(Y,{style:{fontSize:20}})})})]})]},s.po_id)})})]})}),e.jsx(ce,{rowsPerPageOptions:[5,10,25],component:"div",count:v.length,rowsPerPage:i,page:d,onPageChange:B,onRowsPerPageChange:F}),e.jsx(U,{purchaseOrder:A,contentRef:P})]})};export{Ie as default};
