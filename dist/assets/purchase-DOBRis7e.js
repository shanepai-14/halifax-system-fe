import{K as E,r,Z as N,_ as H,j as e,v as o,F as J,l as b,P as K,T as Z,z as q,I as y,J as G}from"./index-VYacBzdn.js";import{u as Q}from"./usePurchaseOrders-NTer0GSH.js";import{P as U}from"./PrintablePO--Re6mrg5.js";import{l as V}from"./index-akne5vGV.js";import{P as X}from"./Print-D7wFt9a2.js";import{C as Y}from"./Container-g1D49Be8.js";import{T as p}from"./TextField-DcFzWKp_.js";import{R as ee}from"./SearchOutlined-CuhT5l3w.js";import{M as l}from"./MenuItem--hotehpj.js";import{R as se}from"./ClearOutlined-Ck6tTetQ.js";import{R as te}from"./PlusOutlined-NVaeiLU6.js";import{b as ae,c as re,d as ne,T as x,a as t,e as le}from"./TableRow-F8UK-irz.js";import{f as ie}from"./format-BzRktsyD.js";import{R as oe}from"./EyeOutlined-DxhCRKYA.js";import{T as ce}from"./TablePagination-Dq0YRuKk.js";import{S as n}from"./Skeleton-wlVAb656.js";import"./InputLabel-Cn1m3Ebo.js";import"./KeyboardArrowRight-CWBZhDWc.js";import"./LastPage-DIxfCoDv.js";const de={pending:"warning",partially_received:"info",completed:"success",cancelled:"error"},ue=()=>e.jsxs(x,{children:[e.jsx(t,{children:e.jsx(n,{animation:"wave"})}),e.jsx(t,{children:e.jsx(n,{animation:"wave"})}),e.jsx(t,{children:e.jsx(n,{animation:"wave"})}),e.jsx(t,{children:e.jsx(n,{animation:"wave"})}),e.jsx(t,{children:e.jsx(n,{animation:"wave"})}),e.jsx(t,{children:e.jsx(n,{animation:"wave",width:80})}),e.jsx(t,{align:"right",children:e.jsxs(o,{sx:{display:"flex",justifyContent:"flex-end",gap:1},children:[e.jsx(n,{animation:"wave",variant:"circular",width:32,height:32}),e.jsx(n,{animation:"wave",variant:"circular",width:32,height:32})]})})]}),Oe=()=>{const c=E(),[d,j]=r.useState(0),[i,T]=r.useState(10),[u,g]=r.useState(""),[m,S]=r.useState("All Suppliers"),[R,_]=r.useState({}),[A,I]=r.useState(null),[h,f]=r.useState("All Status"),P=r.useRef(),O=N(H),{data:k=[],isLoading:z}=Q(R),L=V.useReactToPrint({contentRef:P}),F=["All Suppliers",...new Set(O.map(s=>s==null?void 0:s.supplier_name))].filter(Boolean),v=k.filter(s=>{var C,w;const a=s.po_number.toLowerCase().includes(u.toLowerCase())||((C=s.supplier)==null?void 0:C.supplier_name.toLowerCase().includes(u.toLowerCase())),W=m==="All Suppliers"||((w=s.supplier)==null?void 0:w.supplier_name)===m,D=h==="All Status"||s.status===h.toLowerCase().replace(" ","_");return a&&W&&D}),B=(s,a)=>{j(a)},M=s=>{T(parseInt(s.target.value,10)),j(0)},$=()=>{g(""),S("All Suppliers"),f("All Status"),_({})};return e.jsxs(Y,{maxWidth:"xxl",sx:{mt:0,px:"0!important"},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,gap:2},children:[e.jsxs(o,{sx:{display:"flex",gap:2,flex:1},children:[e.jsx(p,{placeholder:"Search PO number",variant:"outlined",size:"small",value:u,onChange:s=>g(s.target.value),InputProps:{startAdornment:e.jsx(J,{position:"start",children:e.jsx(ee,{})})},sx:{minWidth:200}}),e.jsx(p,{select:!0,size:"small",value:m,onChange:s=>S(s.target.value),label:"Filter by Supplier",sx:{minWidth:200},children:F.map(s=>e.jsx(l,{value:s,children:s},s))}),e.jsxs(p,{select:!0,size:"small",value:h,onChange:s=>f(s.target.value),label:"Filter by Status",sx:{minWidth:200},children:[e.jsx(l,{value:"All Status",children:"All Status"}),e.jsx(l,{value:"Pending",children:"Pending"}),e.jsx(l,{value:"Partially Received",children:"Partially Received"}),e.jsx(l,{value:"Completed",children:"Completed"}),e.jsx(l,{value:"Cancelled",children:"Cancelled"})]})]}),e.jsxs(o,{children:[e.jsx(b,{variant:"text",color:"error",sx:{mr:1},onClick:$,children:e.jsx(se,{})}),e.jsx(b,{variant:"contained",color:"error",startIcon:e.jsx(te,{}),onClick:()=>c("/app/purchase/create"),children:"Create PO"})]})]}),e.jsx(ae,{component:K,children:e.jsxs(re,{children:[e.jsx(ne,{children:e.jsxs(x,{children:[e.jsx(t,{children:"PO Number"}),e.jsx(t,{children:"Date"}),e.jsx(t,{children:"Supplier"}),e.jsx(t,{children:"Total Amount"}),e.jsx(t,{children:"Status"}),e.jsx(t,{align:"right",children:"Actions"})]})}),e.jsx(le,{children:z?[...Array(i)].map((s,a)=>e.jsx(ue,{},a)):v.slice(d*i,d*i+i).map(s=>{var a;return e.jsxs(x,{children:[e.jsx(t,{onClick:()=>c(`${s.po_number}/edit`),color:"primary",children:e.jsx(Z,{color:"primary",children:s.po_number})}),e.jsx(t,{children:ie(new Date(s.po_date),"MMM dd, yyyy")}),e.jsx(t,{children:(a=s.supplier)==null?void 0:a.supplier_name}),e.jsxs(t,{children:["â‚±",Number(s.total_amount).toLocaleString()]}),e.jsx(t,{children:e.jsx(q,{label:s.status.replace("_"," "),color:de[s.status],size:"small"})}),e.jsxs(t,{align:"right",children:[e.jsx(y,{onClick:()=>c(`${s.po_number}/edit`),children:e.jsx(oe,{style:{fontSize:20}})}),e.jsx(G,{title:"Print Purchase Order",children:e.jsx(y,{onClick:()=>{I(s),setTimeout(L,100)},children:e.jsx(X,{style:{fontSize:20}})})})]})]},s.po_id)})})]})}),e.jsx(ce,{rowsPerPageOptions:[5,10,25],component:"div",count:v.length,rowsPerPage:i,page:d,onPageChange:B,onRowsPerPageChange:M}),e.jsx(U,{purchaseOrder:A,contentRef:P})]})};export{Oe as default};
