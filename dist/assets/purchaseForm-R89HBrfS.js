import{a6 as Gt,r as I,a9 as gt,aa as Kt,ab as et,ac as Qt,a as Ft,g as Nt,s as B,e as ot,m as fe,u as Ht,j as n,c as tt,b as zt,ad as ce,ae as Tt,I as Ne,af as Vt,P as Bt,ag as ht,V as Jt,h as mt,N as Xt,_ as Yt,Q as Zt,S as kt,ah as eo,U as to,J as oo,q as bt,T as jt,G as de,t as xt}from"./index-D1JMdfBH.js";import{a as ro}from"./usePurchaseOrders-o6fHjbgT.js";import{S as no}from"./SupplierModal-D9rWnMPN.js";import{i as yt,g as ve,A as so,C as ao,T as Le,c as io,d as lo,e as po,a as Rt,b as Q,f as uo}from"./TextField-CqUPLGNT.js";import{C as co}from"./Close-DPiaitBZ.js";import{R as wt}from"./PlusOutlined-CUASEOeT.js";import{R as fo}from"./DeleteOutlined-BXynkypd.js";import{B as It}from"./InputLabel-DwtkTGL1.js";function _t(o){return o.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function go(o={}){const{ignoreAccents:r=!0,ignoreCase:f=!0,limit:d,matchFrom:A="any",stringify:C,trim:O=!1}=o;return(w,{inputValue:E,getOptionLabel:M})=>{let T=O?E.trim():E;f&&(T=T.toLowerCase()),r&&(T=_t(T));const N=T?w.filter(te=>{let _=(C||M)(te);return f&&(_=_.toLowerCase()),r&&(_=_t(_)),A==="start"?_.startsWith(T):_.includes(T)}):w;return typeof d=="number"?N.slice(0,d):N}}const ho=go(),Dt=5,mo=o=>{var r;return o.current!==null&&((r=o.current.parentElement)==null?void 0:r.contains(document.activeElement))},bo=[];function xo(o){const{unstable_isActiveElementInListbox:r=mo,unstable_classNamePrefix:f="Mui",autoComplete:d=!1,autoHighlight:A=!1,autoSelect:C=!1,blurOnSelect:O=!1,clearOnBlur:w=!o.freeSolo,clearOnEscape:E=!1,componentName:M="useAutocomplete",defaultValue:T=o.multiple?bo:null,disableClearable:N=!1,disableCloseOnSelect:te=!1,disabled:_,disabledItemsFocusable:pe=!1,disableListWrap:oe=!1,filterOptions:ge=ho,filterSelectedOptions:he=!1,freeSolo:re=!1,getOptionDisabled:H,getOptionKey:p,getOptionLabel:i=t=>t.label??t,groupBy:h,handleHomeEndKeys:v=!o.freeSolo,id:$,includeInputInList:k=!1,inputValue:ne,isOptionEqualToValue:J=(t,e)=>t===e,multiple:x=!1,onChange:rt,onClose:nt,onHighlightChange:He,onInputChange:se,onOpen:ze,open:Ct,openOnFocus:Ot=!1,options:$t,readOnly:me=!1,selectOnFocus:Ae=!o.freeSolo,value:st}=o,F=Gt($);let j=i;j=t=>{const e=i(t);return typeof e!="string"?String(e):e};const Te=I.useRef(!1),ke=I.useRef(!0),L=I.useRef(null),z=I.useRef(null),[je,St]=I.useState(null),[V,Ve]=I.useState(-1),at=A?0:-1,D=I.useRef(at),[a,vt]=gt({controlled:st,default:T,name:M}),[b,be]=gt({controlled:ne,default:"",name:M,state:"inputValue"}),[xe,Re]=I.useState(!1),ye=I.useCallback((t,e,s)=>{if(!(x?a.length<e.length:e!==null)&&!w)return;let c;if(x)c="";else if(e==null)c="";else{const P=j(e);c=typeof P=="string"?P:""}b!==c&&(be(c),se&&se(t,c,s))},[j,b,x,se,be,w,a]),[ae,Be]=gt({controlled:Ct,default:!1,name:M,state:"open"}),[We,it]=I.useState(!0),Ie=!x&&a!=null&&b===j(a),q=ae&&!me,y=q?ge($t.filter(t=>!(he&&(x?a:[a]).some(e=>e!==null&&J(t,e)))),{inputValue:Ie&&We?"":b,getOptionLabel:j}):[],G=Kt({filteredOptions:y,value:a,inputValue:b});I.useEffect(()=>{const t=a!==G.value;xe&&!t||re&&!t||ye(null,a,"reset")},[a,ye,xe,G.value,re]);const we=ae&&y.length>0&&!me,Pe=et(t=>{t===-1?L.current.focus():je.querySelector(`[data-tag-index="${t}"]`).focus()});I.useEffect(()=>{x&&V>a.length-1&&(Ve(-1),Pe(-1))},[a,x,V,Pe]);function Ue(t,e){if(!z.current||t<0||t>=y.length)return-1;let s=t;for(;;){const l=z.current.querySelector(`[data-option-index="${s}"]`),c=pe?!1:!l||l.disabled||l.getAttribute("aria-disabled")==="true";if(l&&l.hasAttribute("tabindex")&&!c)return s;if(e==="next"?s=(s+1)%y.length:s=(s-1+y.length)%y.length,s===t)return-1}}const X=et(({event:t,index:e,reason:s="auto"})=>{if(D.current=e,e===-1?L.current.removeAttribute("aria-activedescendant"):L.current.setAttribute("aria-activedescendant",`${F}-option-${e}`),He&&He(t,e===-1?null:y[e],s),!z.current)return;const l=z.current.querySelector(`[role="option"].${f}-focused`);l&&(l.classList.remove(`${f}-focused`),l.classList.remove(`${f}-focusVisible`));let c=z.current;if(z.current.getAttribute("role")!=="listbox"&&(c=z.current.parentElement.querySelector('[role="listbox"]')),!c)return;if(e===-1){c.scrollTop=0;return}const P=z.current.querySelector(`[data-option-index="${e}"]`);if(P&&(P.classList.add(`${f}-focused`),s==="keyboard"&&P.classList.add(`${f}-focusVisible`),c.scrollHeight>c.clientHeight&&s!=="mouse"&&s!=="touch")){const m=P,U=c.clientHeight+c.scrollTop,Je=m.offsetTop+m.offsetHeight;Je>U?c.scrollTop=Je-c.clientHeight:m.offsetTop-m.offsetHeight*(h?1.3:0)<c.scrollTop&&(c.scrollTop=m.offsetTop-m.offsetHeight*(h?1.3:0))}}),W=et(({event:t,diff:e,direction:s="next",reason:l="auto"})=>{if(!q)return;const P=Ue((()=>{const m=y.length-1;if(e==="reset")return at;if(e==="start")return 0;if(e==="end")return m;const U=D.current+e;return U<0?U===-1&&k?-1:oe&&D.current!==-1||Math.abs(e)>1?0:m:U>m?U===m+1&&k?-1:oe||Math.abs(e)>1?m:0:U})(),s);if(X({index:P,reason:l,event:t}),d&&e!=="reset")if(P===-1)L.current.value=b;else{const m=j(y[P]);L.current.value=m,m.toLowerCase().indexOf(b.toLowerCase())===0&&b.length>0&&L.current.setSelectionRange(b.length,m.length)}}),lt=()=>{const t=(e,s)=>{const l=e?j(e):"",c=s?j(s):"";return l===c};if(D.current!==-1&&G.filteredOptions&&G.filteredOptions.length!==y.length&&G.inputValue===b&&(x?a.length===G.value.length&&G.value.every((e,s)=>j(a[s])===j(e)):t(G.value,a))){const e=G.filteredOptions[D.current];if(e)return y.findIndex(s=>j(s)===j(e))}return-1},_e=I.useCallback(()=>{if(!q)return;const t=lt();if(t!==-1){D.current=t;return}const e=x?a[0]:a;if(y.length===0||e==null){W({diff:"reset"});return}if(z.current){if(e!=null){const s=y[D.current];if(x&&s&&a.findIndex(c=>J(s,c))!==-1)return;const l=y.findIndex(c=>J(c,e));l===-1?W({diff:"reset"}):X({index:l});return}if(D.current>=y.length-1){X({index:y.length-1});return}X({index:D.current})}},[y.length,x?!1:a,he,W,X,q,b,x]),pt=et(t=>{Qt(z,t),t&&_e()});I.useEffect(()=>{_e()},[_e]);const Y=t=>{ae||(Be(!0),it(!0),ze&&ze(t))},Z=(t,e)=>{ae&&(Be(!1),nt&&nt(t,e))},ie=(t,e,s,l)=>{if(x){if(a.length===e.length&&a.every((c,P)=>c===e[P]))return}else if(a===e)return;rt&&rt(t,e,s,l),vt(e)},Ce=I.useRef(!1),ue=(t,e,s="selectOption",l="options")=>{let c=s,P=e;if(x){P=Array.isArray(a)?a.slice():[];const m=P.findIndex(U=>J(e,U));m===-1?P.push(e):l!=="freeSolo"&&(P.splice(m,1),c="removeOption")}ye(t,P,c),ie(t,P,c,{option:e}),!te&&(!t||!t.ctrlKey&&!t.metaKey)&&Z(t,c),(O===!0||O==="touch"&&Ce.current||O==="mouse"&&!Ce.current)&&L.current.blur()};function Oe(t,e){if(t===-1)return-1;let s=t;for(;;){if(e==="next"&&s===a.length||e==="previous"&&s===-1)return-1;const l=je.querySelector(`[data-tag-index="${s}"]`);if(!l||!l.hasAttribute("tabindex")||l.disabled||l.getAttribute("aria-disabled")==="true")s+=e==="next"?1:-1;else return s}}const De=(t,e)=>{if(!x)return;b===""&&Z(t,"toggleInput");let s=V;V===-1?b===""&&e==="previous"&&(s=a.length-1):(s+=e==="next"?1:-1,s<0&&(s=0),s===a.length&&(s=-1)),s=Oe(s,e),Ve(s),Pe(s)},Ge=t=>{Te.current=!0,be(""),se&&se(t,"","clear"),ie(t,x?[]:null,"clear")},$e=t=>e=>{if(t.onKeyDown&&t.onKeyDown(e),!e.defaultMuiPrevented&&(V!==-1&&!["ArrowLeft","ArrowRight"].includes(e.key)&&(Ve(-1),Pe(-1)),e.which!==229))switch(e.key){case"Home":q&&v&&(e.preventDefault(),W({diff:"start",direction:"next",reason:"keyboard",event:e}));break;case"End":q&&v&&(e.preventDefault(),W({diff:"end",direction:"previous",reason:"keyboard",event:e}));break;case"PageUp":e.preventDefault(),W({diff:-Dt,direction:"previous",reason:"keyboard",event:e}),Y(e);break;case"PageDown":e.preventDefault(),W({diff:Dt,direction:"next",reason:"keyboard",event:e}),Y(e);break;case"ArrowDown":e.preventDefault(),W({diff:1,direction:"next",reason:"keyboard",event:e}),Y(e);break;case"ArrowUp":e.preventDefault(),W({diff:-1,direction:"previous",reason:"keyboard",event:e}),Y(e);break;case"ArrowLeft":De(e,"previous");break;case"ArrowRight":De(e,"next");break;case"Enter":if(D.current!==-1&&q){const s=y[D.current],l=H?H(s):!1;if(e.preventDefault(),l)return;ue(e,s,"selectOption"),d&&L.current.setSelectionRange(L.current.value.length,L.current.value.length)}else re&&b!==""&&Ie===!1&&(x&&e.preventDefault(),ue(e,b,"createOption","freeSolo"));break;case"Escape":q?(e.preventDefault(),e.stopPropagation(),Z(e,"escape")):E&&(b!==""||x&&a.length>0)&&(e.preventDefault(),e.stopPropagation(),Ge(e));break;case"Backspace":if(x&&!me&&b===""&&a.length>0){const s=V===-1?a.length-1:V,l=a.slice();l.splice(s,1),ie(e,l,"removeOption",{option:a[s]})}break;case"Delete":if(x&&!me&&b===""&&a.length>0&&V!==-1){const s=V,l=a.slice();l.splice(s,1),ie(e,l,"removeOption",{option:a[s]})}break}},ut=t=>{Re(!0),Ot&&!Te.current&&Y(t)},Ke=t=>{if(r(z)){L.current.focus();return}Re(!1),ke.current=!0,Te.current=!1,C&&D.current!==-1&&q?ue(t,y[D.current],"blur"):C&&re&&b!==""?ue(t,b,"blur","freeSolo"):w&&ye(t,a,"blur"),Z(t,"blur")},Se=t=>{const e=t.target.value;b!==e&&(be(e),it(!1),se&&se(t,e,"input")),e===""?!N&&!x&&ie(t,null,"clear"):Y(t)},Me=t=>{const e=Number(t.currentTarget.getAttribute("data-option-index"));D.current!==e&&X({event:t,index:e,reason:"mouse"})},qe=t=>{X({event:t,index:Number(t.currentTarget.getAttribute("data-option-index")),reason:"touch"}),Ce.current=!0},ct=t=>{const e=Number(t.currentTarget.getAttribute("data-option-index"));ue(t,y[e],"selectOption"),Ce.current=!1},dt=t=>e=>{const s=a.slice();s.splice(t,1),ie(e,s,"removeOption",{option:a[t]})},Qe=t=>{ae?Z(t,"toggleInput"):Y(t)},Lt=t=>{t.currentTarget.contains(t.target)&&t.target.getAttribute("id")!==F&&t.preventDefault()},Ee=t=>{t.currentTarget.contains(t.target)&&(L.current.focus(),Ae&&ke.current&&L.current.selectionEnd-L.current.selectionStart===0&&L.current.select(),ke.current=!1)},R=t=>{!_&&(b===""||!ae)&&Qe(t)};let S=re&&b.length>0;S=S||(x?a.length>0:a!==null);let ee=y;return h&&(ee=y.reduce((t,e,s)=>{const l=h(e);return t.length>0&&t[t.length-1].group===l?t[t.length-1].options.push(e):t.push({key:s,index:s,group:l,options:[e]}),t},[])),_&&xe&&Ke(),{getRootProps:(t={})=>({"aria-owns":we?`${F}-listbox`:null,...t,onKeyDown:$e(t),onMouseDown:Lt,onClick:Ee}),getInputLabelProps:()=>({id:`${F}-label`,htmlFor:F}),getInputProps:()=>({id:F,value:b,onBlur:Ke,onFocus:ut,onChange:Se,onMouseDown:R,"aria-activedescendant":q?"":null,"aria-autocomplete":d?"both":"list","aria-controls":we?`${F}-listbox`:void 0,"aria-expanded":we,autoComplete:"off",ref:L,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:_}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:Ge}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:Qe}),getTagProps:({index:t})=>({key:t,"data-tag-index":t,tabIndex:-1,...!me&&{onDelete:dt(t)}}),getListboxProps:()=>({role:"listbox",id:`${F}-listbox`,"aria-labelledby":`${F}-label`,ref:pt,onMouseDown:t=>{t.preventDefault()}}),getOptionProps:({index:t,option:e})=>{const s=(x?a:[a]).some(c=>c!=null&&J(e,c)),l=H?H(e):!1;return{key:(p==null?void 0:p(e))??j(e),tabIndex:-1,role:"option",id:`${F}-option-${t}`,onMouseMove:Me,onClick:ct,onTouchStart:qe,"data-option-index":t,"aria-disabled":l,"aria-selected":s}},id:F,inputValue:b,value:a,dirty:S,expanded:q&&je,popupOpen:q,focused:xe||V!==-1,anchorEl:je,setAnchorEl:St,focusedTag:V,groupedOptions:ee}}function yo(o){return Ft("MuiListSubheader",o)}Nt("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const Io=o=>{const{classes:r,color:f,disableGutters:d,inset:A,disableSticky:C}=o,O={root:["root",f!=="default"&&`color${ot(f)}`,!d&&"gutters",A&&"inset",!C&&"sticky"]};return zt(O,yo,r)},Po=B("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(o,r)=>{const{ownerState:f}=o;return[r.root,f.color!=="default"&&r[`color${ot(f.color)}`],!f.disableGutters&&r.gutters,f.inset&&r.inset,!f.disableSticky&&r.sticky]}})(fe(({theme:o})=>({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(o.vars||o).palette.text.secondary,fontFamily:o.typography.fontFamily,fontWeight:o.typography.fontWeightMedium,fontSize:o.typography.pxToRem(14),variants:[{props:{color:"primary"},style:{color:(o.vars||o).palette.primary.main}},{props:{color:"inherit"},style:{color:"inherit"}},{props:({ownerState:r})=>!r.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:r})=>r.inset,style:{paddingLeft:72}},{props:({ownerState:r})=>!r.disableSticky,style:{position:"sticky",top:0,zIndex:1,backgroundColor:(o.vars||o).palette.background.paper}}]}))),Pt=I.forwardRef(function(r,f){const d=Ht({props:r,name:"MuiListSubheader"}),{className:A,color:C="default",component:O="li",disableGutters:w=!1,disableSticky:E=!1,inset:M=!1,...T}=d,N={...d,color:C,component:O,disableGutters:w,disableSticky:E,inset:M},te=Io(N);return n.jsx(Po,{as:O,className:tt(te.root,A),ref:f,ownerState:N,...T})});Pt&&(Pt.muiSkipListHighlight=!0);function Co(o){return Ft("MuiAutocomplete",o)}const u=Nt("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]);var Mt,qt;const Oo=o=>{const{classes:r,disablePortal:f,expanded:d,focused:A,fullWidth:C,hasClearIcon:O,hasPopupIcon:w,inputFocused:E,popupOpen:M,size:T}=o,N={root:["root",d&&"expanded",A&&"focused",C&&"fullWidth",O&&"hasClearIcon",w&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",E&&"inputFocused"],tag:["tag",`tagSize${ot(T)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",M&&"popupIndicatorOpen"],popper:["popper",f&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return zt(N,Co,r)},$o=B("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(o,r)=>{const{ownerState:f}=o,{fullWidth:d,hasClearIcon:A,hasPopupIcon:C,inputFocused:O,size:w}=f;return[{[`& .${u.tag}`]:r.tag},{[`& .${u.tag}`]:r[`tagSize${ot(w)}`]},{[`& .${u.inputRoot}`]:r.inputRoot},{[`& .${u.input}`]:r.input},{[`& .${u.input}`]:O&&r.inputFocused},r.root,d&&r.fullWidth,C&&r.hasPopupIcon,A&&r.hasClearIcon]}})({[`&.${u.focused} .${u.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${u.clearIndicator}`]:{visibility:"visible"}},[`& .${u.tag}`]:{margin:3,maxWidth:"calc(100% - 6px)"},[`& .${u.inputRoot}`]:{[`.${u.hasPopupIcon}&, .${u.hasClearIcon}&`]:{paddingRight:30},[`.${u.hasPopupIcon}.${u.hasClearIcon}&`]:{paddingRight:56},[`& .${u.input}`]:{width:0,minWidth:30}},[`& .${yt.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${yt.root}.${ce.sizeSmall}`]:{[`& .${yt.input}`]:{padding:"2px 4px 3px 0"}},[`& .${Tt.root}`]:{padding:9,[`.${u.hasPopupIcon}&, .${u.hasClearIcon}&`]:{paddingRight:39},[`.${u.hasPopupIcon}.${u.hasClearIcon}&`]:{paddingRight:65},[`& .${u.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${u.endAdornment}`]:{right:9}},[`& .${Tt.root}.${ce.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${u.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${ve.root}`]:{paddingTop:19,paddingLeft:8,[`.${u.hasPopupIcon}&, .${u.hasClearIcon}&`]:{paddingRight:39},[`.${u.hasPopupIcon}.${u.hasClearIcon}&`]:{paddingRight:65},[`& .${ve.input}`]:{padding:"7px 4px"},[`& .${u.endAdornment}`]:{right:9}},[`& .${ve.root}.${ce.sizeSmall}`]:{paddingBottom:1,[`& .${ve.input}`]:{padding:"2.5px 4px"}},[`& .${ce.hiddenLabel}`]:{paddingTop:8},[`& .${ve.root}.${ce.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${u.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${ve.root}.${ce.hiddenLabel}.${ce.sizeSmall}`]:{[`& .${u.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${u.input}`]:{flexGrow:1,textOverflow:"ellipsis",opacity:0},variants:[{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{[`& .${u.tag}`]:{margin:2,maxWidth:"calc(100% - 4px)"}}},{props:{inputFocused:!0},style:{[`& .${u.input}`]:{opacity:1}}},{props:{multiple:!0},style:{[`& .${u.inputRoot}`]:{flexWrap:"wrap"}}}]}),So=B("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(o,r)=>r.endAdornment})({position:"absolute",right:0,top:"50%",transform:"translate(0, -50%)"}),vo=B(Ne,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(o,r)=>r.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),Lo=B(Ne,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:({ownerState:o},r)=>({...r.popupIndicator,...o.popupOpen&&r.popupIndicatorOpen})})({padding:2,marginRight:-2,variants:[{props:{popupOpen:!0},style:{transform:"rotate(180deg)"}}]}),Ao=B(Vt,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(o,r)=>{const{ownerState:f}=o;return[{[`& .${u.option}`]:r.option},r.popper,f.disablePortal&&r.popperDisablePortal]}})(fe(({theme:o})=>({zIndex:(o.vars||o).zIndex.modal,variants:[{props:{disablePortal:!0},style:{position:"absolute"}}]}))),To=B(Bt,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(o,r)=>r.paper})(fe(({theme:o})=>({...o.typography.body1,overflow:"auto"}))),ko=B("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(o,r)=>r.loading})(fe(({theme:o})=>({color:(o.vars||o).palette.text.secondary,padding:"14px 16px"}))),jo=B("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(o,r)=>r.noOptions})(fe(({theme:o})=>({color:(o.vars||o).palette.text.secondary,padding:"14px 16px"}))),Ro=B("ul",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(o,r)=>r.listbox})(fe(({theme:o})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${u.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[o.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${u.focused}`]:{backgroundColor:(o.vars||o).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(o.vars||o).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${u.focusVisible}`]:{backgroundColor:(o.vars||o).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:o.vars?`rgba(${o.vars.palette.primary.mainChannel} / ${o.vars.palette.action.selectedOpacity})`:mt(o.palette.primary.main,o.palette.action.selectedOpacity),[`&.${u.focused}`]:{backgroundColor:o.vars?`rgba(${o.vars.palette.primary.mainChannel} / calc(${o.vars.palette.action.selectedOpacity} + ${o.vars.palette.action.hoverOpacity}))`:mt(o.palette.primary.main,o.palette.action.selectedOpacity+o.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(o.vars||o).palette.action.selected}},[`&.${u.focusVisible}`]:{backgroundColor:o.vars?`rgba(${o.vars.palette.primary.mainChannel} / calc(${o.vars.palette.action.selectedOpacity} + ${o.vars.palette.action.focusOpacity}))`:mt(o.palette.primary.main,o.palette.action.selectedOpacity+o.palette.action.focusOpacity)}}}}))),wo=B(Pt,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(o,r)=>r.groupLabel})(fe(({theme:o})=>({backgroundColor:(o.vars||o).palette.background.paper,top:-8}))),_o=B("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(o,r)=>r.groupUl})({padding:0,[`& .${u.option}`]:{paddingLeft:24}}),Et=I.forwardRef(function(r,f){const d=Ht({props:r,name:"MuiAutocomplete"}),{autoComplete:A=!1,autoHighlight:C=!1,autoSelect:O=!1,blurOnSelect:w=!1,ChipProps:E,className:M,clearIcon:T=Mt||(Mt=n.jsx(co,{fontSize:"small"})),clearOnBlur:N=!d.freeSolo,clearOnEscape:te=!1,clearText:_="Clear",closeText:pe="Close",componentsProps:oe,defaultValue:ge=d.multiple?[]:null,disableClearable:he=!1,disableCloseOnSelect:re=!1,disabled:H=!1,disabledItemsFocusable:p=!1,disableListWrap:i=!1,disablePortal:h=!1,filterOptions:v,filterSelectedOptions:$=!1,forcePopupIcon:k="auto",freeSolo:ne=!1,fullWidth:J=!1,getLimitTagsText:x=g=>`+${g}`,getOptionDisabled:rt,getOptionKey:nt,getOptionLabel:He,isOptionEqualToValue:se,groupBy:ze,handleHomeEndKeys:Ct=!d.freeSolo,id:Ot,includeInputInList:$t=!1,inputValue:me,limitTags:Ae=-1,ListboxComponent:st,ListboxProps:F,loading:j=!1,loadingText:Te="Loading…",multiple:ke=!1,noOptionsText:L="No options",onChange:z,onClose:je,onHighlightChange:St,onInputChange:V,onOpen:Ve,open:at,openOnFocus:D=!1,openText:a="Open",options:vt,PaperComponent:b,PopperComponent:be,popupIcon:xe=qt||(qt=n.jsx(so,{})),readOnly:Re=!1,renderGroup:ye,renderInput:ae,renderOption:Be,renderTags:We,selectOnFocus:it=!d.freeSolo,size:Ie="medium",slots:q={},slotProps:y={},value:G,...we}=d,{getRootProps:Pe,getInputProps:Ue,getInputLabelProps:X,getPopupIndicatorProps:W,getClearProps:lt,getTagProps:_e,getListboxProps:pt,getOptionProps:Y,value:Z,dirty:ie,expanded:Ce,id:ue,popupOpen:Oe,focused:De,focusedTag:Ge,anchorEl:$e,setAnchorEl:ut,inputValue:Ke,groupedOptions:Se}=xo({...d,componentName:"Autocomplete"}),Me=!he&&!H&&ie&&!Re,qe=(!ne||k===!0)&&k!==!1,{onMouseDown:ct}=Ue(),{ref:dt,...Qe}=pt(),Ee=He||(g=>g.label??g),R={...d,disablePortal:h,expanded:Ce,focused:De,fullWidth:J,getOptionLabel:Ee,hasClearIcon:Me,hasPopupIcon:qe,inputFocused:Ge===-1,popupOpen:Oe,size:Ie},S=Oo(R),ee={slots:{paper:b,popper:be,...q},slotProps:{chip:E,listbox:F,...oe,...y}},[t,e]=ht("listbox",{elementType:Ro,externalForwardedProps:ee,ownerState:R,className:S.listbox,additionalProps:Qe,ref:dt}),[s,l]=ht("paper",{elementType:Bt,externalForwardedProps:ee,ownerState:R,className:S.paper}),[c,P]=ht("popper",{elementType:Vt,externalForwardedProps:ee,ownerState:R,className:S.popper,additionalProps:{disablePortal:h,style:{width:$e?$e.clientWidth:null},role:"presentation",anchorEl:$e,open:Oe}});let m;if(ke&&Z.length>0){const g=K=>({className:S.tag,disabled:H,..._e(K)});We?m=We(Z,g,R):m=Z.map((K,le)=>{const{key:Fe,...Ut}=g({index:le});return n.jsx(Jt,{label:Ee(K),size:Ie,...Ut,...ee.slotProps.chip},Fe)})}if(Ae>-1&&Array.isArray(m)){const g=m.length-Ae;!De&&g>0&&(m=m.splice(0,Ae),m.push(n.jsx("span",{className:S.tag,children:x(g)},m.length)))}const Je=ye||(g=>n.jsxs("li",{children:[n.jsx(wo,{className:S.groupLabel,ownerState:R,component:"div",children:g.group}),n.jsx(_o,{className:S.groupUl,ownerState:R,children:g.children})]},g.key)),Wt=Be||((g,K)=>{const{key:le,...Fe}=g;return n.jsx("li",{...Fe,children:Ee(K)},le)}),At=(g,K)=>{const le=Y({option:g,index:K});return Wt({...le,className:S.option},g,{selected:le["aria-selected"],index:K,inputValue:Ke},R)},Xe=ee.slotProps.clearIndicator,Ye=ee.slotProps.popupIndicator,ft=g=>n.jsx(Ao,{as:c,...P,children:n.jsx(To,{as:s,...l,children:g})});let Ze=null;return Se.length>0?Ze=ft(n.jsx(t,{as:st,...e,children:Se.map((g,K)=>ze?Je({key:g.key,group:g.group,children:g.options.map((le,Fe)=>At(le,g.index+Fe))}):At(g,K))})):j&&Se.length===0?Ze=ft(n.jsx(ko,{className:S.loading,ownerState:R,children:Te})):Se.length===0&&!ne&&!j&&(Ze=ft(n.jsx(jo,{className:S.noOptions,ownerState:R,role:"presentation",onMouseDown:g=>{g.preventDefault()},children:L}))),n.jsxs(I.Fragment,{children:[n.jsx($o,{ref:f,className:tt(S.root,M),ownerState:R,...Pe(we),children:ae({id:ue,disabled:H,fullWidth:!0,size:Ie==="small"?"small":void 0,InputLabelProps:X(),InputProps:{ref:ut,className:S.inputRoot,startAdornment:m,onMouseDown:g=>{g.target===g.currentTarget&&ct(g)},...(Me||qe)&&{endAdornment:n.jsxs(So,{className:S.endAdornment,ownerState:R,children:[Me?n.jsx(vo,{...lt(),"aria-label":_,title:_,ownerState:R,...Xe,className:tt(S.clearIndicator,Xe==null?void 0:Xe.className),children:T}):null,qe?n.jsx(Lo,{...W(),disabled:H,"aria-label":Oe?pe:a,title:Oe?pe:a,ownerState:R,...Ye,className:tt(S.popupIndicator,Ye==null?void 0:Ye.className),children:xe}):null]})}},inputProps:{className:S.input,disabled:H,readOnly:Re,...Ue()}})}),$e?Ze:null]})});var Do={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},Mo=function(r,f){return I.createElement(Xt,Yt({},r,{ref:f,icon:Do}))},qo=I.forwardRef(Mo);const Eo={supplier_id:"",po_date:new Date().toISOString().split("T")[0],remarks:"",items:[{product_id:"",requested_quantity:1,price:0}]},Ko=()=>{const o=Zt(),[r,f]=I.useState(Eo),[d,A]=I.useState({}),C=kt(eo),O=kt(to),[w,E]=I.useState(!1),M=ro(),T=oo(),N=async p=>{var h,v;p.preventDefault();const i={};if(r.supplier_id||(i.supplier_id="Supplier is required"),r.items.forEach(($,k)=>{$.product_id||(i[`items.${k}.product_id`]="Product is required"),(!$.requested_quantity||$.requested_quantity<=0)&&(i[`items.${k}.requested_quantity`]="Quantity must be greater than 0"),(!$.price||$.price<=0)&&(i[`items.${k}.price`]="Price must be greater than 0");const ne=r.items.filter(J=>J.product_id===$.product_id).length;$.product_id&&ne>1&&(i[`items.${k}.product_id`]="Duplicate product is not allowed")}),Object.keys(i).length>0){A(i),xt.error("Please fill in all required fields correctly");return}try{await M.mutateAsync(r),o("/app/purchase"),xt.success("Successfully Created Purchase Order")}catch($){(v=(h=$.response)==null?void 0:h.data)!=null&&v.errors&&A($.response.data.errors),xt.error("Something went wrong please try again")}},te=async p=>{try{await T.mutateAsync(p),pe()}catch(i){console.error("Error creating supplier:",i)}},_=()=>{E(!0)},pe=()=>{E(!1)},oe=p=>{f(i=>({...i,[p.target.name]:p.target.value}))},ge=(p,i,h)=>{if(i==="product_id"&&h&&r.items.some((k,ne)=>ne!==p&&k.product_id===h)){A(k=>({...k,[`items.${p}.product_id`]:"This product is already added"}));return}const v=[...r.items];v[p]={...v[p],[i]:h},f($=>({...$,items:v})),d[`items.${p}.${i}`]&&A($=>{const k={...$};return delete k[`items.${p}.${i}`],k})},he=()=>{f(p=>({...p,items:[...p.items,{product_id:"",requested_quantity:1,price:0}]}))},re=p=>{if(r.items.length>1){const i=r.items.filter((h,v)=>v!==p);f(h=>({...h,items:i}))}},H=()=>r.items.reduce((p,i)=>p+i.price*i.requested_quantity,0);return n.jsxs(ao,{maxWidth:"lg",sx:{mt:0,mb:4},children:[n.jsxs(bt,{sx:{mb:4,display:"flex",alignItems:"center",gap:2},children:[n.jsx(Ne,{onClick:()=>o("/app/purchase"),children:n.jsx(qo,{})}),n.jsx(jt,{variant:"h5",children:"Create Purchase Order"})]}),n.jsx("form",{onSubmit:N,children:n.jsxs(de,{container:!0,spacing:1,children:[n.jsx(de,{item:!0,xs:12,md:6,children:n.jsx(Et,{value:(O==null?void 0:O.find(p=>p.supplier_id===r.supplier_id))||null,onChange:(p,i)=>oe({target:{name:"supplier_id",value:i?i.supplier_id:""}}),options:O||[],getOptionLabel:p=>p.supplier_name||"",isOptionEqualToValue:(p,i)=>p.supplier_id===i,renderInput:p=>n.jsx(Le,{...p,fullWidth:!0,label:"Supplier",name:"supplier_id",error:!!d.supplier_id,helperText:d.supplier_id,sx:{"& .MuiInputBase-root":{padding:"4px 8px"},"& .MuiFormLabel-root":{fontSize:"0.875rem"}}})})}),n.jsx(de,{item:!0,xs:"auto",sx:{paddingLeft:0},children:n.jsx(Ne,{sx:{marginLeft:"0px !important"},onClick:_,children:n.jsx(wt,{})})}),n.jsx(de,{item:!0,xs:12,md:5,ml:7,children:n.jsx(Le,{fullWidth:!0,type:"date",name:"po_date",label:"PO Date",value:r.po_date,onChange:oe,error:!!d.po_date,helperText:d.po_date,InputLabelProps:{shrink:!0}})}),n.jsxs(de,{item:!0,xs:12,children:[n.jsx(io,{children:n.jsxs(lo,{children:[n.jsx(po,{children:n.jsxs(Rt,{children:[n.jsx(Q,{children:"Product"}),n.jsx(Q,{children:"Quantity"}),n.jsx(Q,{children:"Price"}),n.jsx(Q,{children:"Total"}),n.jsx(Q,{width:50})]})}),n.jsx(uo,{children:r.items.map((p,i)=>n.jsxs(Rt,{children:[n.jsx(Q,{children:n.jsx(Et,{value:(C==null?void 0:C.find(h=>h.id===p.product_id))||null,onChange:(h,v)=>ge(i,"product_id",v?v.id:""),options:(C==null?void 0:C.filter(h=>!r.items.some((v,$)=>$!==i&&v.product_id===h.id)))||[],getOptionLabel:h=>h.product_name||"",isOptionEqualToValue:(h,v)=>h.id===v,renderInput:h=>n.jsx(Le,{...h,fullWidth:!0,sx:{"& .MuiInputBase-root":{padding:"4px 8px"},"& .MuiFormLabel-root":{fontSize:"0.875rem"}},error:!!d[`items.${i}.product_id`],helperText:d[`items.${i}.product_id`]||"Required"})})}),n.jsx(Q,{children:n.jsx(Le,{type:"number",value:p.requested_quantity,onChange:h=>ge(i,"requested_quantity",h.target.value),error:!!d[`items.${i}.requested_quantity`],helperText:d[`items.${i}.requested_quantity`]||"Required",inputProps:{min:1}})}),n.jsx(Q,{children:n.jsx(Le,{type:"number",value:p.price,onChange:h=>ge(i,"price",h.target.value),error:!!d[`items.${i}.price`],helperText:d[`items.${i}.price`]||"Required",inputProps:{min:0,step:.01}})}),n.jsxs(Q,{children:["₱",(p.price*p.requested_quantity).toFixed(2)]}),n.jsx(Q,{children:n.jsx(Ne,{onClick:()=>re(i),disabled:r.items.length===1,children:n.jsx(fo,{})})})]},i))})]})}),n.jsxs(bt,{sx:{mt:2,display:"flex",justifyContent:"space-between"},children:[n.jsx(It,{startIcon:n.jsx(wt,{}),onClick:he,children:"Add Item"}),n.jsxs(jt,{variant:"h6",children:["Total: ₱",H().toFixed(2)]})]})]}),n.jsx(de,{item:!0,xs:12,children:n.jsx(Le,{fullWidth:!0,multiline:!0,rows:4,name:"remarks",label:"Remarks",value:r.remarks,onChange:oe,error:!!d.remarks,helperText:d.remarks})}),n.jsx(de,{item:!0,xs:12,children:n.jsxs(bt,{sx:{display:"flex",gap:2,justifyContent:"flex-end"},children:[n.jsx(It,{variant:"outlined",onClick:()=>o("/app/purchase"),children:"Cancel"}),n.jsx(It,{variant:"contained",type:"submit",disabled:M.isPending,children:"Create Purchase Order"})]})})]})}),n.jsx(no,{open:w,handleClose:pe,handleAddSupplier:te})]})};export{Ko as default};
