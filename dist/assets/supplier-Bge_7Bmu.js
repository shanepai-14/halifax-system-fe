import{r as o,H as M,J as k,K as B,L as $,j as e,q as m,A as z,P as D,I as c}from"./index-CmW0R-vW.js";import{A as H}from"./addSupplierModal-7_DAL2aU.js";import{C as O,T as F,c as V,d as q,e as J,a as g,b as r,f as K}from"./TextField-Dbf9w0KL.js";import{R as N,a as U,T as W}from"./SearchOutlined-rzr7sXJ5.js";import{B as f}from"./InputLabel-DPT03u9u.js";import{R as G,a as Q}from"./EyeOutlined-CzS9LoIB.js";import{R as X}from"./PlusOutlined-ByE6885J.js";import{R as Y}from"./DeleteOutlined-DLclpYfS.js";const le=()=>{const[l,d]=o.useState(0),[a,C]=o.useState(10),[t,p]=o.useState(""),[S,h]=o.useState(!1),{data:i,isLoading:P,error:x,refetch:w}=M(),A=k();B();const R=$(),u=i==null?void 0:i.filter(s=>s.supplier_name.toLowerCase().includes(t.toLowerCase())||s.contact_person.toLowerCase().includes(t.toLowerCase())||s.email.toLowerCase().includes(t.toLowerCase())),I=(s,n)=>{d(n)},y=s=>{C(parseInt(s.target.value,10)),d(0)},T=async s=>{try{await R.mutateAsync(s)}catch(n){console.error("Error deleting supplier:",n)}},b=s=>{console.log("Edit supplier",s)},v=s=>{console.log("View supplier",s)},L=()=>{h(!0)},j=()=>{h(!1)},E=async s=>{try{await A.mutateAsync(s),w(),j()}catch(n){console.error("Error creating supplier:",n)}},_=()=>{p("")};return P?e.jsx("div",{children:"Loading..."}):x?e.jsxs("div",{children:["Error: ",x.message]}):e.jsxs(O,{maxWidth:"xxl",sx:{mt:0,px:"0!important"},children:[e.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(F,{placeholder:"Search suppliers...",variant:"outlined",size:"small",value:t,onChange:s=>p(s.target.value),InputProps:{startAdornment:e.jsx(z,{position:"start",children:e.jsx(N,{})})}}),e.jsxs(m,{children:[e.jsx(f,{variant:"text",color:"error",sx:{mr:1},onClick:_,children:e.jsx(G,{})}),e.jsx(f,{variant:"contained",color:"error",startIcon:e.jsx(X,{}),onClick:L,children:"Add Supplier"})]})]}),e.jsx(V,{component:D,children:e.jsxs(q,{children:[e.jsx(J,{children:e.jsxs(g,{children:[e.jsx(r,{children:"Name"}),e.jsx(r,{children:"Contact Person"}),e.jsx(r,{children:"Email"}),e.jsx(r,{children:"Phone"}),e.jsx(r,{children:"Address"}),e.jsx(r,{align:"right",children:"Actions"})]})}),e.jsx(K,{children:u.slice(l*a,l*a+a).map(s=>e.jsxs(g,{children:[e.jsx(r,{children:s.supplier_name}),e.jsx(r,{children:s.contact_person}),e.jsx(r,{children:s.email}),e.jsx(r,{children:s.phone}),e.jsx(r,{children:s.address}),e.jsxs(r,{align:"right",children:[e.jsx(c,{onClick:()=>v(s.supplier_id),children:e.jsx(Q,{style:{fontSize:20}})}),e.jsx(c,{onClick:()=>b(s.supplier_id),children:e.jsx(U,{style:{fontSize:20}})}),e.jsx(c,{onClick:()=>T(s.supplier_id),children:e.jsx(Y,{style:{fontSize:20}})})]})]},s.supplier_id))})]})}),e.jsx(W,{rowsPerPageOptions:[5,10,25],component:"div",count:u.length,rowsPerPage:a,page:l,onPageChange:I,onRowsPerPageChange:y}),e.jsx(H,{open:S,handleClose:j,handleAddSupplier:E})]})};export{le as default};
