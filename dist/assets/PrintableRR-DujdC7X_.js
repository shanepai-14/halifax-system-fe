import{d as F,j as e,a9 as j,aa as b,a0 as h,t as u,a8 as T,q as c,T as a,D as p,P as w}from"./index-BH3gsM3a.js";import{d as _,e as v,a as x,b as r,f as W}from"./TextField-C1dtzEEq.js";const N=F(e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit");function q(){const s=j();return b({mutationFn:async t=>(await h.post("/purchase-orders/receiving-reports",t)).data,onSuccess:(t,n)=>{s.invalidateQueries(["purchaseOrder",n.po_id]),u.success("Receiving report created successfully")},onError:t=>{var n,d;return console.error("Error creating receiving report:",t),u.error(((d=(n=t.response)==null?void 0:n.data)==null?void 0:d.message)||"Failed to create receiving report"),Promise.reject(t)}})}function S(){const s=j();return b({mutationFn:async({rrID:t,data:n})=>(await h.put(`/purchase-orders/${t}/receiving-reports`,n)).data,onSuccess:(t,n)=>{s.invalidateQueries(["purchaseOrder"]),u.success("Receiving report updated successfully")},onError:t=>{var n,d;return console.error("Error updating receiving report:",t),u.error(((d=(n=t.response)==null?void 0:n.data)==null?void 0:d.message)||"Failed to update receiving report"),Promise.reject(t)}})}function A(s={}){return T({queryKey:["receiving-reports",s],queryFn:async()=>(await h.get("/receiving-reports",{params:s})).data.data})}function k(){const s=j();return b({mutationFn:async({id:t,isPaid:n})=>(await h.put(`/receiving-reports/${t}/payment-status`,{is_paid:n})).data,onSuccess:t=>{var n;s.invalidateQueries(["receiving-reports"]),(n=t.data)!=null&&n.po_id&&s.invalidateQueries(["purchase-orders",t.data.po_id]),u.success(`Payment status ${t.data.is_paid?"marked as paid":"marked as unpaid"}`)},onError:t=>{var n,d;console.error("Error updating payment status:",t),u.error(((d=(n=t.response)==null?void 0:n.data)==null?void 0:d.message)||"Failed to update payment status")}})}function I(){return T({queryKey:["receiving-reports-stats"],queryFn:async()=>(await h.get("/receiving-reports/stats")).data.data})}const D=({receivingReport:s,contentRef:t})=>{var m,g,f,y;if(!s)return null;const n=i=>(i==null?void 0:i.reduce((l,o)=>l+o.cost_price*o.received_quantity,0))||0,d=i=>(i==null?void 0:i.reduce((l,o)=>l+(Number(o.amount)||0),0))||0,P=()=>{const i=n(s.received_items),l=d(s.additional_costs);return i+l};return e.jsxs(c,{ref:t,sx:{display:"none","@media print":{display:"block",p:4,bgcolor:"white"}},children:[e.jsxs(c,{sx:{mb:4,textAlign:"center"},children:[e.jsx(a,{variant:"h4",sx:{mb:1,fontWeight:"bold"},children:"RECEIVING REPORT"}),e.jsxs(a,{variant:"h6",children:["Batch Number: ",s.batch_number]})]}),e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",mb:4},children:[e.jsxs(c,{children:[e.jsx(a,{variant:"subtitle1",sx:{fontWeight:"bold",mb:1},children:"Supplier Information:"}),e.jsx(a,{children:(m=s.supplier)==null?void 0:m.supplier_name}),e.jsx(a,{children:(g=s.supplier)==null?void 0:g.address}),e.jsx(a,{children:(f=s.supplier)==null?void 0:f.contact_number})]}),e.jsxs(c,{sx:{textAlign:"right"},children:[e.jsxs(a,{sx:{mb:1},children:[e.jsx("strong",{children:"PO Number:"})," ",s.po_number]}),e.jsxs(a,{sx:{mb:1},children:[e.jsx("strong",{children:"Date Received:"})," ",new Date(s.created_at).toLocaleDateString()]}),e.jsxs(a,{sx:{mb:1},children:[e.jsx("strong",{children:"Payment Status:"})," ",s.is_paid?"PAID":"UNPAID"]}),e.jsxs(a,{children:[e.jsx("strong",{children:"Invoice Number:"})," ",s.invoice?s.invoice:"NO INVOICE YET"]}),s.term>0&&e.jsxs(a,{children:[e.jsx("strong",{children:"Payment Terms:"})," ",s.term," days"]})]})]}),e.jsx(p,{sx:{mb:4}}),e.jsx(a,{variant:"h6",sx:{mb:2,fontWeight:"bold"},children:"Received Items"}),e.jsxs(_,{sx:{mb:4},children:[e.jsx(v,{children:e.jsxs(x,{sx:{backgroundColor:"#f5f5f5"},children:[e.jsx(r,{sx:{fontWeight:"bold"},children:"Product"}),e.jsx(r,{sx:{fontWeight:"bold"},children:"Received Qty"}),e.jsx(r,{sx:{fontWeight:"bold"},children:"Cost Price"}),e.jsx(r,{sx:{fontWeight:"bold"},children:"Walk-in Price"}),e.jsx(r,{sx:{fontWeight:"bold"},children:"Wholesale Price"}),e.jsx(r,{sx:{fontWeight:"bold"},children:"Regular Price"}),e.jsx(r,{sx:{fontWeight:"bold"},children:"Total"})]})}),e.jsxs(W,{children:[(y=s.received_items)==null?void 0:y.map((i,l)=>{var o;return e.jsxs(x,{children:[e.jsx(r,{children:(o=i.product)==null?void 0:o.product_name}),e.jsx(r,{children:i.received_quantity}),e.jsxs(r,{children:["₱",Number(i.cost_price).toFixed(2)]}),e.jsxs(r,{children:["₱",Number(i.walk_in_price).toFixed(2)]}),e.jsxs(r,{children:["₱",Number(i.wholesale_price).toFixed(2)]}),e.jsxs(r,{children:["₱",Number(i.regular_price).toFixed(2)]}),e.jsxs(r,{children:["₱",(i.cost_price*i.received_quantity).toFixed(2)]})]},l)}),e.jsxs(x,{children:[e.jsx(r,{colSpan:6,sx:{textAlign:"right",fontWeight:"bold"},children:"Items Total:"}),e.jsxs(r,{sx:{fontWeight:"bold"},children:["₱",n(s.received_items).toFixed(2)]})]})]})]}),s.additional_costs&&s.additional_costs.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(a,{variant:"h6",sx:{mb:2,fontWeight:"bold"},children:"Additional Costs"}),e.jsxs(_,{sx:{mb:4},children:[e.jsx(v,{children:e.jsxs(x,{sx:{backgroundColor:"#f5f5f5"},children:[e.jsx(r,{sx:{fontWeight:"bold"},children:"Cost Type"}),e.jsx(r,{sx:{fontWeight:"bold"},children:"Amount"}),e.jsx(r,{sx:{fontWeight:"bold"},children:"Remarks"})]})}),e.jsxs(W,{children:[s.additional_costs.map((i,l)=>{var o;return e.jsxs(x,{children:[e.jsx(r,{children:(o=i.cost_type)==null?void 0:o.name}),e.jsxs(r,{children:["₱",Number(i.amount).toFixed(2)]}),e.jsx(r,{children:i.remarks||"-"})]},l)}),e.jsxs(x,{children:[e.jsx(r,{colSpan:1,sx:{textAlign:"right",fontWeight:"bold"},children:"Additional Costs Total:"}),e.jsxs(r,{sx:{fontWeight:"bold"},children:["₱",d(s.additional_costs).toFixed(2)]}),e.jsx(r,{})]})]})]})]}),e.jsx(c,{sx:{display:"flex",justifyContent:"flex-end",mb:4},children:e.jsx(w,{elevation:1,sx:{p:2,width:"300px"},children:e.jsxs(a,{variant:"h6",sx:{fontWeight:"bold"},children:["Grand Total: ₱",P().toFixed(2)]})})}),e.jsx(c,{sx:{mt:6},children:e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",mt:8},children:[e.jsxs(c,{sx:{width:"200px"},children:[e.jsx(p,{}),e.jsx(a,{sx:{mt:1},children:"Received by"})]}),e.jsxs(c,{sx:{width:"200px"},children:[e.jsx(p,{}),e.jsx(a,{sx:{mt:1},children:"Verified by"})]})]})})]})};export{N as E,D as P,S as a,A as b,I as c,k as d,q as u};
