import{a as D,g as U,d as M,j as t,s as $,P as Z,e as O,m as J,r as p,u as X,$ as L,I as Y,c as ee,b as te,a4 as E,a3 as T,i as R,a6 as H,a7 as G,q as F,G as u,T as I,F as ne,a8 as f,a9 as re,aa as se,a0 as v,t as ae}from"./index-B4lmkI_6.js";import{C as oe,A as ie}from"./Autocomplete-SQN_jJeH.js";import{T as q,S as le}from"./TextField-CUtW5_1o.js";import{I as ce,F as de,B as _}from"./InputLabel-DSTZXsCg.js";import{M as ue}from"./SearchOutlined-BYiwTQ9_.js";import{R as pe}from"./CloseOutlined-Dv1PHuEj.js";function ve(e){return D("MuiAlert",e)}const W=U("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),ye=M(t.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),me=M(t.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),ge=M(t.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),xe=M(t.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),fe=e=>{const{variant:n,color:a,severity:r,classes:y}=e,C={root:["root",`color${O(a||r)}`,`${n}${O(a||r)}`,`${n}`],icon:["icon"],message:["message"],action:["action"]};return te(C,ve,y)},he=$(Z,{name:"MuiAlert",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:a}=e;return[n.root,n[a.variant],n[`${a.variant}${O(a.color||a.severity)}`]]}})(J(({theme:e})=>{const n=e.palette.mode==="light"?E:T,a=e.palette.mode==="light"?T:E;return{...e.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(e.palette).filter(R(["light"])).map(([r])=>({props:{colorSeverity:r,variant:"standard"},style:{color:e.vars?e.vars.palette.Alert[`${r}Color`]:n(e.palette[r].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${r}StandardBg`]:a(e.palette[r].light,.9),[`& .${W.icon}`]:e.vars?{color:e.vars.palette.Alert[`${r}IconColor`]}:{color:e.palette[r].main}}})),...Object.entries(e.palette).filter(R(["light"])).map(([r])=>({props:{colorSeverity:r,variant:"outlined"},style:{color:e.vars?e.vars.palette.Alert[`${r}Color`]:n(e.palette[r].light,.6),border:`1px solid ${(e.vars||e).palette[r].light}`,[`& .${W.icon}`]:e.vars?{color:e.vars.palette.Alert[`${r}IconColor`]}:{color:e.palette[r].main}}})),...Object.entries(e.palette).filter(R(["dark"])).map(([r])=>({props:{colorSeverity:r,variant:"filled"},style:{fontWeight:e.typography.fontWeightMedium,...e.vars?{color:e.vars.palette.Alert[`${r}FilledColor`],backgroundColor:e.vars.palette.Alert[`${r}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[r].dark:e.palette[r].main,color:e.palette.getContrastText(e.palette[r].main)}}}))]}})),je=$("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,n)=>n.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),Ce=$("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,n)=>n.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),B=$("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,n)=>n.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),k={success:t.jsx(ye,{fontSize:"inherit"}),warning:t.jsx(me,{fontSize:"inherit"}),error:t.jsx(ge,{fontSize:"inherit"}),info:t.jsx(xe,{fontSize:"inherit"})},Oe=p.forwardRef(function(n,a){const r=X({props:n,name:"MuiAlert"}),{action:y,children:C,className:l,closeText:h="Close",color:o,components:j={},componentsProps:z={},icon:m,iconMapping:P=k,onClose:b,role:g="alert",severity:s="success",slotProps:i={},slots:x={},variant:c="standard",...S}=r,d={...r,color:o,severity:s,variant:c,colorSeverity:o||s},A=fe(d),w={slots:{closeButton:j.CloseButton,closeIcon:j.CloseIcon,...x},slotProps:{...z,...i}},[Q,N]=L("closeButton",{elementType:Y,externalForwardedProps:w,ownerState:d}),[V,K]=L("closeIcon",{elementType:oe,externalForwardedProps:w,ownerState:d});return t.jsxs(he,{role:g,elevation:0,ownerState:d,className:ee(A.root,l),ref:a,...S,children:[m!==!1?t.jsx(je,{ownerState:d,className:A.icon,children:m||P[s]||k[s]}):null,t.jsx(Ce,{ownerState:d,className:A.message,children:C}),y!=null?t.jsx(B,{ownerState:d,className:A.action,children:y}):null,y==null&&b?t.jsx(B,{ownerState:d,className:A.action,children:t.jsx(Q,{size:"small","aria-label":h,title:h,color:"inherit",onClick:b,...N,children:t.jsx(V,{fontSize:"small",...K})})}):null]})});var Ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},be=function(n,a){return p.createElement(H,G({},n,{ref:a,icon:Ae}))},Se=p.forwardRef(be),Ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"},qe=function(n,a){return p.createElement(H,G({},n,{ref:a,icon:Ie}))},we=p.forwardRef(qe);const Le=({product:e,products:n,adjustmentTypes:a,onSubmit:r,onCancel:y,onSelectedProduct:C})=>{console.log(e);const[l,h]=p.useState({id:(e==null?void 0:e.id)||"",product_id:(e==null?void 0:e.id)||"",quantity:"",type:"addition",reason:"",notes:""}),[o,j]=p.useState({});p.useEffect(()=>{e&&h(s=>({...s,id:e.id||"",product_id:e.id||""}))},[e]);const z=()=>{const s={};return console.log("formData",l),l.product_id||(s.product_id="Product is required"),(!l.quantity||l.quantity<=0)&&(s.quantity="Quantity must be greater than 0"),l.reason||(s.reason="Reason is required"),j(s),Object.keys(s).length===0},m=s=>{const{name:i,value:x}=s.target;h(c=>({...c,[i]:x})),o[i]&&j(c=>{const S={...c};return delete S[i],S})},P=(s,i)=>{h(x=>({...x,product_id:i?i.id:"",id:i?i.id:""})),console.log("newValue",i),C(i),o.product_id&&j(x=>{const c={...x};return delete c.product_id,c})},b=s=>{s.preventDefault(),z()&&r(l)},g=e||n.find(s=>s.id===l.id);return console.log("product",e),console.log("products",n),t.jsx(F,{component:"form",onSubmit:b,sx:{mt:2},children:t.jsxs(u,{container:!0,spacing:3,children:[t.jsx(u,{item:!0,xs:12,children:t.jsx(ie,{value:g||null,onChange:P,options:n||[],getOptionLabel:s=>`${s.product_code} - ${s.product_name}`,isOptionEqualToValue:(s,i)=>s.id===i.id,renderInput:s=>t.jsx(q,{...s,fullWidth:!0,label:"Product",error:!!o.product_id,helperText:o.product_id,disabled:e!==null&&e.product_id})})}),g&&t.jsx(u,{item:!0,xs:12,children:t.jsxs(F,{sx:{mb:2,p:2,bgcolor:"background.paper",borderRadius:1,border:"1px solid #e0e0e0"},children:[t.jsx(I,{variant:"subtitle1",fontWeight:"bold",children:"Current Inventory:"}),t.jsxs(I,{children:["Product: ",g.product_name]}),t.jsxs(I,{children:["Current Quantity: ",g.quantity||0]}),t.jsxs(I,{children:["Reorder Level: ",g.reorder_level||"Not set"]})]})}),t.jsx(u,{item:!0,xs:12,md:6,children:t.jsxs(ne,{fullWidth:!0,error:!!o.type,children:[t.jsx(ce,{children:"Adjustment Type"}),t.jsx(le,{name:"type",value:l.type,onChange:m,label:"Adjustment Type",children:a.map(s=>t.jsx(ue,{value:s.value,children:s.label},s.value))}),o.type&&t.jsx(de,{children:o.type})]})}),t.jsx(u,{item:!0,xs:12,md:6,children:t.jsx(q,{fullWidth:!0,label:"Quantity",name:"quantity",type:"number",value:l.quantity,onChange:m,error:!!o.quantity,helperText:o.quantity||"Enter quantity to adjust",InputProps:{inputProps:{min:1}}})}),t.jsx(u,{item:!0,xs:12,children:t.jsx(q,{fullWidth:!0,label:"Reason",name:"reason",value:l.reason,onChange:m,error:!!o.reason,helperText:o.reason||"Provide reason for this adjustment",required:!0})}),t.jsx(u,{item:!0,xs:12,children:t.jsx(q,{fullWidth:!0,label:"Additional Notes",name:"notes",value:l.notes,onChange:m,multiline:!0,rows:3,helperText:"Optional: Add any additional notes or details"})}),t.jsx(u,{item:!0,xs:12,children:t.jsxs(F,{sx:{display:"flex",justifyContent:"flex-end",gap:2,mt:2},children:[t.jsx(_,{variant:"outlined",color:"inherit",onClick:y,startIcon:t.jsx(pe,{}),children:"Cancel"}),t.jsx(_,{type:"submit",variant:"contained",color:"primary",startIcon:t.jsx(Se,{}),children:"Save Adjustment"})]})})]})})},Ee=()=>f({queryKey:["inventory"],queryFn:async()=>(await v.get("/inventory")).data.data}),Te=e=>f({queryKey:["inventory",e],queryFn:async()=>(await v.get(`/inventory/product/${e}`)).data.data,enabled:!!e}),_e=()=>{const e=re();return se({mutationFn:async n=>(await v.post("/inventory/adjustments",n)).data,onSuccess:(n,a)=>{e.invalidateQueries(["inventory"]),e.invalidateQueries(["inventory",a.product_id]),e.invalidateQueries(["inventory-adjustments"]),e.invalidateQueries(["inventory-adjustments",a.product_id])},onError:n=>{var a,r;ae.error(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to create adjustment")}})},We=(e={})=>f({queryKey:["inventory-adjustments",e],queryFn:async()=>(await v.get("/inventory/adjustments",{params:e})).data.data}),Be=e=>f({queryKey:["inventory-adjustments",e],queryFn:async()=>(await v.get(`/inventory/adjustments/product/${e}`)).data.data,enabled:!!e}),ke=(e={})=>f({queryKey:["inventory-logs",e],queryFn:async()=>(await v.get("/inventory/logs",{params:e})).data.data}),He=e=>f({queryKey:["inventory-logs",e],queryFn:async()=>(await v.get(`/inventory/logs/product/${e}`)).data.data,enabled:!!e}),Ge=e=>f({queryKey:["product-transactions",e],queryFn:async()=>(await v.get(`/inventory/transactions/product/${e}`)).data.data,enabled:!!e});export{Oe as A,Le as I,we as R,We as a,_e as b,ke as c,Te as d,Be as e,He as f,Ge as g,Ee as u};
