import{Q as D,r,S as N,U as H,j as e,q as o,E as q,P as Q,T as U,y as G,I as b,H as J}from"./index-BH4OZBNn.js";import{u as K}from"./usePurchaseOrders-CLruy5rQ.js";import{P as V}from"./PrintablePO-CkuOuDpn.js";import{l as X}from"./index-B7bdO_rH.js";import{P as Y}from"./Print--sgFxDyO.js";import{C as Z}from"./Container-Ccg0UrpZ.js";import{T as x,c as ee,d as se,e as te,a as p,b as t,f as ae}from"./TextField-DF5xaGpt.js";import{R as re}from"./SearchOutlined-CK5kM7w4.js";import{M as l}from"./MenuItem-BzYG3h4A.js";import{B as y}from"./InputLabel-BCuRqJ6g.js";import{R as ne}from"./ClearOutlined-D2Mqx3gw.js";import{R as le}from"./PlusOutlined-BtYhiO4s.js";import{f as ie}from"./format-BzRktsyD.js";import{R as oe}from"./EyeOutlined-eti8W485.js";import{T as ce}from"./TablePagination-BG09ACF2.js";import{S as n}from"./Skeleton-udNI9PE0.js";import"./LastPage-DzOnq2jV.js";const de={pending:"warning",partially_received:"info",completed:"success",cancelled:"error"},ue=()=>e.jsxs(p,{children:[e.jsx(t,{children:e.jsx(n,{animation:"wave"})}),e.jsx(t,{children:e.jsx(n,{animation:"wave"})}),e.jsx(t,{children:e.jsx(n,{animation:"wave"})}),e.jsx(t,{children:e.jsx(n,{animation:"wave"})}),e.jsx(t,{children:e.jsx(n,{animation:"wave"})}),e.jsx(t,{children:e.jsx(n,{animation:"wave",width:80})}),e.jsx(t,{align:"right",children:e.jsxs(o,{sx:{display:"flex",justifyContent:"flex-end",gap:1},children:[e.jsx(n,{animation:"wave",variant:"circular",width:32,height:32}),e.jsx(n,{animation:"wave",variant:"circular",width:32,height:32})]})})]}),Ae=()=>{const c=D(),[d,j]=r.useState(0),[i,R]=r.useState(10),[u,g]=r.useState(""),[h,S]=r.useState("All Suppliers"),[T,_]=r.useState({}),[A,I]=r.useState(null),[m,f]=r.useState("All Status"),P=r.useRef(),O=N(H),{data:k=[],isLoading:L}=K(T),z=X.useReactToPrint({contentRef:P}),B=["All Suppliers",...new Set(O.map(s=>s==null?void 0:s.supplier_name))].filter(Boolean),v=k.filter(s=>{var C,w;const a=s.po_number.toLowerCase().includes(u.toLowerCase())||((C=s.supplier)==null?void 0:C.supplier_name.toLowerCase().includes(u.toLowerCase())),E=h==="All Suppliers"||((w=s.supplier)==null?void 0:w.supplier_name)===h,W=m==="All Status"||s.status===m.toLowerCase().replace(" ","_");return a&&E&&W}),F=(s,a)=>{j(a)},M=s=>{R(parseInt(s.target.value,10)),j(0)},$=()=>{g(""),S("All Suppliers"),f("All Status"),_({})};return e.jsxs(Z,{maxWidth:"xxl",sx:{mt:0,px:"0!important"},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,gap:2},children:[e.jsxs(o,{sx:{display:"flex",gap:2,flex:1},children:[e.jsx(x,{placeholder:"Search PO number",variant:"outlined",size:"small",value:u,onChange:s=>g(s.target.value),InputProps:{startAdornment:e.jsx(q,{position:"start",children:e.jsx(re,{})})},sx:{minWidth:200}}),e.jsx(x,{select:!0,size:"small",value:h,onChange:s=>S(s.target.value),label:"Filter by Supplier",sx:{minWidth:200},children:B.map(s=>e.jsx(l,{value:s,children:s},s))}),e.jsxs(x,{select:!0,size:"small",value:m,onChange:s=>f(s.target.value),label:"Filter by Status",sx:{minWidth:200},children:[e.jsx(l,{value:"All Status",children:"All Status"}),e.jsx(l,{value:"Pending",children:"Pending"}),e.jsx(l,{value:"Partially Received",children:"Partially Received"}),e.jsx(l,{value:"Completed",children:"Completed"}),e.jsx(l,{value:"Cancelled",children:"Cancelled"})]})]}),e.jsxs(o,{children:[e.jsx(y,{variant:"text",color:"error",sx:{mr:1},onClick:$,children:e.jsx(ne,{})}),e.jsx(y,{variant:"contained",color:"error",startIcon:e.jsx(le,{}),onClick:()=>c("/app/purchase/create"),children:"Create PO"})]})]}),e.jsx(ee,{component:Q,children:e.jsxs(se,{children:[e.jsx(te,{children:e.jsxs(p,{children:[e.jsx(t,{children:"PO Number"}),e.jsx(t,{children:"Date"}),e.jsx(t,{children:"Supplier"}),e.jsx(t,{children:"Total Amount"}),e.jsx(t,{children:"Status"}),e.jsx(t,{align:"right",children:"Actions"})]})}),e.jsx(ae,{children:L?[...Array(i)].map((s,a)=>e.jsx(ue,{},a)):v.slice(d*i,d*i+i).map(s=>{var a;return e.jsxs(p,{children:[e.jsx(t,{onClick:()=>c(`${s.po_number}/edit`),color:"primary",children:e.jsx(U,{color:"primary",children:s.po_number})}),e.jsx(t,{children:ie(new Date(s.po_date),"MMM dd, yyyy")}),e.jsx(t,{children:(a=s.supplier)==null?void 0:a.supplier_name}),e.jsxs(t,{children:["â‚±",Number(s.total_amount).toLocaleString()]}),e.jsx(t,{children:e.jsx(G,{label:s.status.replace("_"," "),color:de[s.status],size:"small"})}),e.jsxs(t,{align:"right",children:[e.jsx(b,{onClick:()=>c(`${s.po_number}/edit`),children:e.jsx(oe,{style:{fontSize:20}})}),e.jsx(J,{title:"Print Purchase Order",children:e.jsx(b,{onClick:()=>{I(s),setTimeout(z,100)},children:e.jsx(Y,{style:{fontSize:20}})})})]})]},s.po_id)})})]})}),e.jsx(ce,{rowsPerPageOptions:[5,10,25],component:"div",count:v.length,rowsPerPage:i,page:d,onPageChange:F,onRowsPerPageChange:M}),e.jsx(V,{purchaseOrder:A,contentRef:P})]})};export{Ae as default};
