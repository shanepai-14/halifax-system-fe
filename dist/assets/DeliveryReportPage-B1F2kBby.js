import{r as m,a8 as W,a9 as L,j as e,q as r,T as n,y as z,Y as Pe,I as te,G as s,D as ne,P as H,F as Fe,E as Se,t as E,S as pe,aY as ye,H as re,Q as fe,aB as ve,R as Ie,a1 as Ae,aZ as Me,a_ as ke}from"./index-CrSDUfpv.js";import{l as be}from"./index-CNaeLLNC.js";import{D as se}from"./Dialog-Ov5HwEb9.js";import{D as ae,a as le}from"./DialogTitle-Cw6pjI73.js";import{D as Te}from"./DialogContentText-BKKuNc-g.js";import{c as V,d as $,e as Q,a as k,b as i,f as N,T as B,S as qe}from"./TextField-BZsMM0g7.js";import{D as oe}from"./DialogActions-DYSyT2-7.js";import{B as F,I as Oe}from"./InputLabel-CrBhOIEx.js";import{R as we}from"./PrinterOutlined-CUvOcJpq.js";import{R as Ce}from"./CloseOutlined-DSNBHcB9.js";import{u as _e,R as Be,P as He}from"./PaymentReceipt-PiMxIGC7.js";import{M as ee}from"./MenuItem-D9v4Q_DO.js";import{C as Re}from"./CircularProgress-BZdF-D4l.js";import{R as ze}from"./SaveOutlined-CbUBWhg3.js";import{R as Ee}from"./MoneyCollectOutlined-BzngQVyv.js";import{R as We}from"./DeleteOutlined-Dip08hFK.js";import{S as o}from"./Skeleton-nksCSs6l.js";import{C as Le}from"./Container-DMwzkbrP.js";import{L as ue}from"./Link-DOotjPqG.js";import{R as Ve}from"./ArrowLeftOutlined-ByW9SGAD.js";var $e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"},Qe=function(t,l){return m.createElement(W,L({},t,{ref:l,icon:$e}))},Ne=m.forwardRef(Qe),Ge={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"},Ue=function(t,l){return m.createElement(W,L({},t,{ref:l,icon:Ge}))},Ye=m.forwardRef(Ue),Ze={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 00-44.4 0L77.5 505a63.9 63.9 0 00-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0018.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"}}]},name:"home",theme:"outlined"},Je=function(t,l){return m.createElement(W,L({},t,{ref:l,icon:Ze}))},De=m.forwardRef(Je),Ke={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M793 242H366v-74c0-6.7-7.7-10.4-12.9-6.3l-142 112a8 8 0 000 12.6l142 112c5.2 4.1 12.9.4 12.9-6.3v-74h415v470H175c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h618c35.3 0 64-28.7 64-64V306c0-35.3-28.7-64-64-64z"}}]},name:"rollback",theme:"outlined"},Xe=function(t,l){return m.createElement(W,L({},t,{ref:l,icon:Ke}))},et=m.forwardRef(Xe),tt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"},nt=function(t,l){return m.createElement(W,L({},t,{ref:l,icon:tt}))},st=m.forwardRef(nt);const it=({open:d,onClose:t,returnItems:l,handleReturnQuantityChange:h,returnReason:w,setReturnReason:g,handleSubmitCreditMemo:C,returns:c=[]})=>{const[v,f]=m.useState([]);m.useEffect(()=>{if(l&&l.length>0){const a={};c&&c.length>0&&c.forEach(_=>{_.items.forEach(R=>{const y=R.product_id;a[y]||(a[y]=0),a[y]+=parseInt(R.quantity)})});const j=l.map(_=>{const R=_.product_id,y=a[R]||0,S=Math.max(0,_.max_quantity-y);return{..._,original_max_quantity:_.max_quantity,max_quantity:S,already_returned:y}});f(j)}else f([])},[l,c]);const b=v.some(a=>a.max_quantity>0),u=v.reduce((a,j)=>a+parseFloat(j.sold_price)*j.return_quantity,0);return e.jsxs(se,{open:d,onClose:t,maxWidth:"md",fullWidth:!0,children:[e.jsx(ae,{children:"Create Credit Memo"}),e.jsxs(le,{children:[e.jsx(Te,{children:"Specify the items and quantities to be returned. Only items that are part of this delivery report can be returned."}),c&&c.length>0&&e.jsxs(r,{sx:{mt:2,mb:2,p:2,bgcolor:"background.level2",borderRadius:1},children:[e.jsx(n,{variant:"subtitle2",gutterBottom:!0,children:"Previous Returns:"}),c.map((a,j)=>e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(z,{label:a.credit_memo_number,size:"small",color:"primary",variant:"outlined",sx:{mr:1}}),e.jsxs(n,{variant:"body2",children:[new Date(a.return_date).toLocaleDateString()," - ₱",parseFloat(a.refund_amount).toFixed(2)]})]},a.id))]}),e.jsx(V,{sx:{mt:2},children:e.jsxs($,{size:"small",children:[e.jsx(Q,{children:e.jsxs(k,{children:[e.jsx(i,{children:"Item"}),e.jsx(i,{children:"Code"}),e.jsx(i,{align:"right",children:"Price"}),e.jsx(i,{align:"center",children:"Original Qty"}),e.jsx(i,{align:"center",children:"Already Returned"}),e.jsx(i,{align:"center",children:"Available"}),e.jsx(i,{align:"center",children:"Return Quantity"}),e.jsx(i,{align:"right",children:"Total"})]})}),e.jsxs(N,{children:[v.map(a=>{var j,_;return e.jsxs(k,{sx:a.max_quantity===0?{backgroundColor:"rgba(0,0,0,0.04)"}:{},children:[e.jsx(i,{children:(j=a.product)==null?void 0:j.product_name}),e.jsx(i,{children:(_=a.product)==null?void 0:_.product_code}),e.jsxs(i,{align:"right",children:["₱",parseFloat(a.sold_price).toFixed(2)]}),e.jsx(i,{align:"center",children:a.original_max_quantity}),e.jsxs(i,{align:"center",children:[a.already_returned>0&&e.jsx(z,{label:a.already_returned,size:"small",color:"warning",variant:"outlined"}),a.already_returned===0&&"-"]}),e.jsx(i,{align:"center",children:a.max_quantity}),e.jsx(i,{align:"center",children:e.jsx(B,{type:"number",InputProps:{inputProps:{min:0,max:a.max_quantity}},value:a.return_quantity,onChange:R=>h(a.id,R.target.value,a.already_returned),size:"small",sx:{width:"80px"},disabled:a.max_quantity===0})}),e.jsxs(i,{align:"right",children:["₱",(parseFloat(a.sold_price)*a.return_quantity).toFixed(2)]})]},a.id)}),e.jsxs(k,{children:[e.jsx(i,{colSpan:7,align:"right",children:e.jsx(n,{variant:"subtitle2",children:"Total Return Amount:"})}),e.jsx(i,{align:"right",children:e.jsxs(n,{variant:"subtitle2",children:["₱",u.toFixed(2)]})})]})]})]})}),!b&&e.jsx(r,{sx:{mt:2,p:2,bgcolor:"error.lighter",borderRadius:1},children:e.jsx(n,{variant:"body2",color:"error.main",children:"All items have been fully returned. No further returns are possible."})}),e.jsx(B,{margin:"dense",id:"returnReason",label:"Reason for Return",multiline:!0,rows:3,fullWidth:!0,variant:"outlined",value:w,onChange:a=>g(a.target.value),sx:{mt:3},disabled:!b})]}),e.jsxs(oe,{children:[e.jsx(F,{onClick:t,children:"Cancel"}),e.jsx(F,{onClick:C,variant:"contained",color:"primary",disabled:!b||u<=0,children:"Create Credit Memo"})]})]})},je=d=>d?new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"",rt=({open:d,onClose:t,returns:l,report:h})=>{var c,v,f,b;const w=m.useRef(),g=be.useReactToPrint({contentRef:w}),C=(l==null?void 0:l.reduce((u,a)=>u+parseFloat(a.refund_amount),0))||0;return!l||l.length===0?null:e.jsx(Pe,{open:d,onClose:t,"aria-labelledby":"credit-memo-modal-title",children:e.jsxs(r,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90%",maxWidth:"850px",maxHeight:"90vh",overflow:"auto",bgcolor:"background.paper",boxShadow:24,p:4},children:[e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(n,{id:"credit-memo-modal-title",variant:"h5",children:"Credit Memo Details"}),e.jsxs(r,{children:[e.jsx(F,{variant:"outlined",color:"primary",startIcon:e.jsx(we,{}),onClick:g,sx:{mr:1},children:"Print"}),e.jsx(te,{onClick:t,color:"default",children:e.jsx(Ce,{})})]})]}),e.jsxs(r,{ref:w,sx:{p:2},children:[e.jsxs(s,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(s,{item:!0,xs:12,md:12,children:e.jsxs(r,{sx:{textAlign:"center",mb:2},children:[e.jsx(n,{variant:"h4",children:"CREDIT MEMO"}),e.jsxs(n,{variant:"body2",children:["DR #: ",h==null?void 0:h.invoice_number]})]})}),e.jsxs(s,{item:!0,xs:12,md:12,sx:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(r,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[e.jsx(n,{variant:"h6",children:"Halifax Glass & Aluminum Supply"}),e.jsx(n,{variant:"body2",children:"Malagamot Road, Panacan"}),e.jsx(n,{variant:"body2",children:"glasshalifax@gmail.com"}),e.jsx(n,{variant:"body2",children:"0939 924 3876"})]}),e.jsxs(r,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[e.jsxs(n,{variant:"body2",children:[e.jsx("strong",{children:"Date:"})," ",je(new Date)]}),e.jsxs(n,{variant:"subtitle2",children:[e.jsx("strong",{children:"Customer:"})," ",((c=h==null?void 0:h.customer)==null?void 0:c.business_name)||((v=h==null?void 0:h.customer)==null?void 0:v.customer_name)]}),e.jsxs(n,{variant:"body2",children:[e.jsx("strong",{children:"Address:"})," ",((f=h==null?void 0:h.customer)==null?void 0:f.business_address)||(h==null?void 0:h.address)]}),e.jsxs(n,{variant:"body2",children:[e.jsx("strong",{children:"Phone:"})," ",h==null?void 0:h.phone]})]})]})]}),e.jsx(ne,{sx:{my:2}}),l.map((u,a)=>e.jsxs(r,{sx:{mb:3},children:[e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsxs(n,{variant:"subtitle1",children:["Credit Memo #",u.credit_memo_number]}),e.jsxs(n,{variant:"body2",children:[e.jsx("strong",{children:"Date:"})," ",je(u.return_date)]})]}),e.jsx(V,{component:H,variant:"outlined",sx:{mb:1},children:e.jsxs($,{size:"small",children:[e.jsx(Q,{children:e.jsxs(k,{children:[e.jsx(i,{children:"Item"}),e.jsx(i,{children:"Code"}),e.jsx(i,{align:"right",children:"Price"}),e.jsx(i,{align:"center",children:"Quantity"}),e.jsx(i,{align:"right",children:"Total"}),e.jsx(i,{children:"Condition"}),e.jsx(i,{children:"Reason"})]})}),e.jsx(N,{children:u.items.map(j=>e.jsxs(k,{children:[e.jsx(i,{children:`Product #${j.product_id}`}),e.jsx(i,{children:`P-${j.product_id}`}),e.jsxs(i,{align:"right",children:["₱",parseFloat(j.price).toFixed(2)]}),e.jsx(i,{align:"center",children:j.quantity}),e.jsxs(i,{align:"right",children:["₱",parseFloat(j.subtotal).toFixed(2)]}),e.jsx(i,{children:j.condition}),e.jsx(i,{children:j.return_reason})]},j.id))})]})}),e.jsx(r,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsxs(s,{container:!0,spacing:0,sx:{maxWidth:"300px"},children:[e.jsx(s,{item:!0,xs:6,children:e.jsx(n,{variant:"body1",fontWeight:"bold",align:"right",children:"Refund Amount:"})}),e.jsx(s,{item:!0,xs:6,children:e.jsxs(n,{variant:"body1",fontWeight:"bold",align:"right",children:["₱",parseFloat(u.refund_amount).toFixed(2)]})}),e.jsx(s,{item:!0,xs:6,children:e.jsx(n,{variant:"body2",align:"right",children:"Method:"})}),e.jsx(s,{item:!0,xs:6,children:e.jsx(n,{variant:"body2",align:"right",children:u.refund_method.toUpperCase()})})]})}),a<l.length-1&&e.jsx(ne,{sx:{my:2}})]},u.id)),e.jsx(r,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:e.jsxs(s,{container:!0,spacing:0,sx:{maxWidth:"300px"},children:[e.jsx(s,{item:!0,xs:6,children:e.jsx(n,{variant:"h6",fontWeight:"bold",align:"right",children:"Total Refund:"})}),e.jsx(s,{item:!0,xs:6,children:e.jsxs(n,{variant:"h6",fontWeight:"bold",align:"right",children:["₱",C.toFixed(2)]})})]})}),((b=l[0])==null?void 0:b.remarks)&&e.jsxs(r,{sx:{mt:3},children:[e.jsx(n,{variant:"subtitle2",children:"Remarks:"}),e.jsx(n,{variant:"body2",children:l[0].remarks})]}),e.jsxs(s,{container:!0,spacing:2,sx:{mt:4,px:2,display:"flex",justifyContent:"space-between"},children:[e.jsx(s,{item:!0,xs:3,children:e.jsx(r,{sx:{borderTop:"1px solid #000",pt:1,textAlign:"center"},children:e.jsx(n,{variant:"caption",children:"Prepared By"})})}),e.jsx(s,{item:!0,xs:3,children:e.jsx(r,{sx:{borderTop:"1px solid #000",pt:1,textAlign:"center"},children:e.jsx(n,{variant:"caption",children:"Approved By"})})}),e.jsx(s,{item:!0,xs:3,children:e.jsx(r,{sx:{borderTop:"1px solid #000",pt:1,textAlign:"center"},children:e.jsx(n,{variant:"caption",children:"Customer Signature"})})})]})]})]})})},at=({open:d,handleClose:t,sale:l,onSuccess:h})=>{var R;const w={payment_method:"cash",amount:"",reference_number:"",remarks:""},[g,C]=m.useState(w),[c,v]=m.useState({}),[f,b]=m.useState(!1),{createPayment:u}=_e();m.useEffect(()=>{d&&l&&(C({...w,amount:l.total-l.amount_received||0,received_by:l.customer_id}),v({}))},[d,l]);const a=()=>{const y={};return g.payment_method||(y.payment_method="Payment method is required"),!g.amount||parseFloat(g.amount)<=0?y.amount="Amount must be greater than 0":parseFloat(g.amount)>parseFloat((l==null?void 0:l.total)||0)&&(y.amount="Amount cannot exceed the due amount"),v(y),Object.keys(y).length===0},j=y=>{const{name:S,value:T}=y.target;C(A=>({...A,[S]:T})),c[S]&&v(A=>({...A,[S]:void 0}))},_=async()=>{var y,S;if(a())try{b(!0);const T={...g,amount:parseFloat(g.amount)},A=await u(l.id,T);A&&(E.success("Payment recorded successfully"),h&&h(A),t())}catch(T){console.error("Error saving payment:",T),E.error(((S=(y=T.response)==null?void 0:y.data)==null?void 0:S.message)||"Failed to record payment")}finally{b(!1)}};return e.jsxs(se,{open:d,onClose:t,maxWidth:"sm",fullWidth:!0,"aria-labelledby":"payment-dialog-title",children:[e.jsxs(ae,{id:"payment-dialog-title",sx:{m:0,p:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(n,{variant:"h6",children:"Record Payment"}),e.jsx(te,{"aria-label":"close",onClick:t,size:"small",children:e.jsx(Ce,{})})]}),e.jsxs(le,{dividers:!0,children:[l&&e.jsxs(r,{sx:{mb:3},children:[e.jsxs(n,{variant:"subtitle1",children:["Sale #",l.invoice_number]}),e.jsxs(s,{container:!0,spacing:1,children:[e.jsx(s,{item:!0,xs:6,children:e.jsxs(n,{variant:"body2",children:["Customer: ",((R=l.customer)==null?void 0:R.customer_name)||"Walk-in Customer"]})}),e.jsx(s,{item:!0,xs:6,children:e.jsxs(n,{variant:"body2",children:["Order Date: ",new Date(l.order_date).toLocaleDateString()]})}),e.jsx(s,{item:!0,xs:6,children:e.jsxs(n,{variant:"body2",children:["Total Amount: ₱",parseFloat(l.total).toFixed(2)]})}),e.jsx(s,{item:!0,xs:6,children:e.jsxs(n,{variant:"body2",color:"error",children:["Amount Due: ₱",parseFloat(l.total-l.amount_received||0).toFixed(2)]})})]})]}),e.jsxs(s,{container:!0,spacing:2,children:[e.jsx(s,{item:!0,xs:12,md:6,children:e.jsxs(Fe,{fullWidth:!0,error:!!c.payment_method,children:[e.jsx(Oe,{id:"payment-method-label",children:"Payment Method *"}),e.jsxs(qe,{labelId:"payment-method-label",name:"payment_method",value:g.payment_method,onChange:j,label:"Payment Method *",disabled:f,children:[e.jsx(ee,{value:"cod",children:"Cash"}),e.jsx(ee,{value:"cash",children:"Cash"}),e.jsx(ee,{value:"cheque",children:"Cheque"}),e.jsx(ee,{value:"online",children:"Online Payment"})]}),c.payment_method&&e.jsx(n,{variant:"caption",color:"error",children:c.payment_method})]})}),e.jsx(s,{item:!0,xs:12,md:6,children:e.jsx(B,{fullWidth:!0,label:"Amount *",name:"amount",type:"number",value:g.amount,onChange:j,error:!!c.amount,helperText:c.amount,disabled:f,InputProps:{startAdornment:e.jsx(Se,{position:"start",children:"₱"})}})}),e.jsx(s,{item:!0,xs:12,md:6,children:e.jsx(B,{fullWidth:!0,label:"Payment Date *",name:"payment_date",type:"date",value:g.payment_date,onChange:j,error:!!c.payment_date,helperText:c.payment_date,disabled:!0,InputLabelProps:{shrink:!0}})}),e.jsx(s,{item:!0,xs:12,md:6,children:e.jsx(B,{fullWidth:!0,label:"Reference Number",name:"reference_number",value:g.reference_number,onChange:j,error:!!c.reference_number,helperText:c.reference_number,disabled:f,placeholder:"Cheque/Transaction No."})}),e.jsx(s,{item:!0,xs:12,children:e.jsx(B,{fullWidth:!0,label:"Remarks",name:"remarks",value:g.remarks,onChange:j,multiline:!0,rows:2,disabled:f})})]})]}),e.jsxs(oe,{sx:{px:3,py:2},children:[e.jsx(F,{onClick:t,disabled:f,children:"Cancel"}),e.jsx(F,{variant:"contained",color:"primary",onClick:_,disabled:f,startIcon:f?e.jsx(Re,{size:20,color:"inherit"}):e.jsx(ze,{}),children:f?"Processing...":"Save Payment"})]})]})},lt=({sale:d,onPaymentSuccess:t,disabled:l=!1})=>{const[h,w]=m.useState(!1),[g,C]=m.useState(!1),c=pe(ye),v=(c==null?void 0:c.role)==="admin"||(c==null?void 0:c.role)==="cashier",f=()=>{w(!0)},b=()=>{w(!1)},u=j=>{C(!1),w(!1),t&&t(j)},a=j=>`₱${parseFloat(j).toFixed(2)}`;return v?d!=null&&d.is_paid?e.jsx(r,{sx:{display:"flex",alignItems:"center",gap:1},children:e.jsx(n,{variant:"body2",color:"success.main",fontWeight:"bold",children:"PAID"})}):e.jsxs(e.Fragment,{children:[e.jsx(F,{variant:"outlined",color:"success",startIcon:g?e.jsx(Re,{size:20}):e.jsx(Ee,{}),onClick:f,disabled:l||g,sx:{mr:1},children:g?"Processing...":"Pay Now"}),d&&d.amount_due>0&&e.jsxs(n,{variant:"body2",color:"error",sx:{ml:1,fontWeight:"medium"},children:["Due: ",a(d.amount_due)]}),e.jsx(at,{open:h,handleClose:b,sale:d,onSuccess:u})]}):null},ot=({sale:d,onPaymentUpdate:t,setSelectedReceipt:l})=>{const[h,w]=m.useState([]),[g,C]=m.useState(!1),[c,v]=m.useState(null),[f,b]=m.useState(!1),[u,a]=m.useState(""),{getPaymentHistory:j,voidPayment:_,isLoading:R}=_e(),y=pe(ye),S=(y==null?void 0:y.role)==="admin"||(y==null?void 0:y.role)==="cashier";if(!S)return null;m.useEffect(()=>{d&&A()},[d]);const T=x=>{l({payment:{...x},sale:d})},A=async()=>{try{C(!0);const x=await j(d.id);w(x)}catch(x){console.error("Error fetching payment history:",x)}finally{C(!1)}},G=async()=>{var x,q;if(!u.trim()){E.error("Please provide a reason for voiding the payment");return}try{await _(c.id,u),A(),t&&t(),b(!1),a(""),v(null),E.success("Payment voided successfully")}catch(X){console.error("Error voiding payment:",X),E.error(((q=(x=X.response)==null?void 0:x.data)==null?void 0:q.message)||"Failed to void payment")}},ie=x=>{v(x),b(!0)},U=()=>{b(!1),a(""),v(null)},Y=x=>new Date(x).toLocaleString(),Z=x=>`₱${parseFloat(x).toFixed(2)}`,J=x=>x==="completed"?e.jsx(z,{label:"Completed",color:"success",size:"small"}):x==="voided"?e.jsx(z,{label:"Voided",color:"error",size:"small"}):e.jsx(z,{label:x,size:"small"}),K=x=>({cash:"Cash",credit_card:"Credit Card",debit_card:"Debit Card",cheque:"Cheque",bank_transfer:"Bank Transfer",online:"Online Payment",mobile_payment:"Mobile Payment",store_credit:"Store Credit"})[x]||x;return g?e.jsx(r,{sx:{p:2},children:e.jsx(n,{variant:"body2",children:"Loading payment history..."})}):e.jsxs(e.Fragment,{children:[e.jsxs(r,{sx:{mb:2},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Payment History"}),h.length===0?e.jsx(n,{variant:"body2",color:"text.secondary",children:"No payment records found for this sale."}):e.jsx(V,{component:H,variant:"outlined",children:e.jsxs($,{size:"small",children:[e.jsx(Q,{children:e.jsxs(k,{children:[e.jsx(i,{children:"Date"}),e.jsx(i,{children:"Method"}),e.jsx(i,{children:"Reference No."}),e.jsx(i,{align:"right",children:"Amount"}),e.jsx(i,{children:"Status"}),e.jsx(i,{children:"Received By"}),e.jsx(i,{align:"right",children:"Actions"})]})}),e.jsx(N,{children:h.map(x=>{var q;return e.jsxs(k,{children:[e.jsx(i,{children:Y(x.payment_date)}),e.jsx(i,{children:K(x.payment_method)}),e.jsx(i,{children:x.reference_number||"-"}),e.jsx(i,{align:"right",children:Z(x.amount)}),e.jsx(i,{children:J(x.status)}),e.jsx(i,{children:((q=x.received_by)==null?void 0:q.customer_name)||"-"}),e.jsxs(i,{align:"right",children:[e.jsx(re,{title:"View Receipt",children:e.jsx(te,{size:"small",color:"primary",onClick:()=>T(x),children:e.jsx(Be,{})})}),x.status==="completed"&&S&&e.jsx(re,{title:"Void Payment",children:e.jsx(te,{size:"small",color:"error",onClick:()=>ie(x),children:e.jsx(We,{})})}),x.status==="voided"&&e.jsx(re,{title:`Void reason: ${x.void_reason}`,children:e.jsx(r,{component:"span",sx:{ml:1,color:"text.secondary",fontSize:"0.75rem"},children:"(Voided)"})})]})]},x.id)})})]})})]}),e.jsxs(se,{open:f,onClose:U,children:[e.jsx(ae,{children:"Void Payment"}),e.jsxs(le,{children:[e.jsx(n,{variant:"body2",gutterBottom:!0,children:"Are you sure you want to void this payment? This action cannot be undone."}),c&&e.jsxs(r,{sx:{my:2},children:[e.jsxs(n,{variant:"body2",children:[e.jsx("strong",{children:"Payment Method:"})," ",K(c.payment_method)]}),e.jsxs(n,{variant:"body2",children:[e.jsx("strong",{children:"Amount:"})," ",Z(c.amount)]}),e.jsxs(n,{variant:"body2",children:[e.jsx("strong",{children:"Date:"})," ",Y(c.payment_date)]})]}),e.jsx(B,{label:"Reason for voiding payment",fullWidth:!0,multiline:!0,rows:3,value:u,onChange:x=>a(x.target.value),required:!0,margin:"dense",error:!u.trim(),helperText:u.trim()?"":"Reason is required"})]}),e.jsxs(oe,{children:[e.jsx(F,{onClick:U,children:"Cancel"}),e.jsx(F,{onClick:G,color:"error",disabled:R||!u.trim(),children:R?"Processing...":"Void Payment"})]})]})]})},ge=d=>d?new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"",dt=({refresh:d,report:t})=>{var de,ce,xe,he,me;const[l,h]=m.useState(!1),[w,g]=m.useState(!1),[C,c]=m.useState([]),[v,f]=m.useState(""),b=fe(),u=m.useRef(),[a,j]=m.useState(!1),[_,R]=m.useState(null),{createCreditMemo:y}=ve();Ie.useEffect(()=>{t&&t.items&&c(t.items.map(p=>({...p,return_quantity:0,max_quantity:p.quantity})))},[t]);const S=be.useReactToPrint({contentRef:u}),T=()=>{h(!0)},A=()=>{h(!1)},G=()=>{g(!0)},ie=()=>{g(!1)},U=(p,D,I)=>{const M=Math.max(0,parseInt(D)||0);c(C.map(P=>{if(P.id===p){const O=P.max_quantity-(I||0);return{...P,return_quantity:Math.min(M,O)}}return P}))},Y=async()=>{const p=C.filter(I=>I.return_quantity>0);if(p.length===0){alert("Please specify at least one item to return");return}const D=p.reduce((I,M)=>I+M.return_quantity*M.sold_price,0);try{const I={sale_id:t.id,remarks:v,refund_method:"cash",refund_amount:D,items:p.map(P=>({sale_item_id:P.id,product_id:P.product_id,quantity:P.return_quantity,price:P.sold_price}))};await y(I)&&(A(),d(t.id))}catch{}},Z=((de=t==null?void 0:t.returns)==null?void 0:de.reduce((p,D)=>{var M;const I=((M=D.items)==null?void 0:M.reduce((P,O)=>P+parseFloat(O.quantity||0)*parseFloat(O.price||0),0))||0;return p+I},0))||0,J=async p=>{d(t.id,!0);const D={...t,...p.sale};R({payment:{...p},sale:{...D}})},K=()=>{j(!a)};if(!t)return e.jsxs(r,{sx:{p:4,textAlign:"center"},children:[e.jsx(n,{variant:"h5",children:"No delivery report data available"}),e.jsx(F,{variant:"contained",startIcon:e.jsx(De,{}),onClick:()=>b("/dashboard"),sx:{mt:2},children:"Go to Dashboard"})]});const x=t.items.reduce((p,D)=>p+parseFloat(D.sold_price)*D.quantity,0),q=t.items.reduce((p,D)=>{const M=parseFloat(D.sold_price)*D.quantity*(parseFloat(D.discount)/100);return p+M},0),X=x-q;return e.jsxs(e.Fragment,{children:[e.jsxs(H,{elevation:2,sx:{p:3,mb:3},children:[e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(n,{variant:"h5",children:"Delivery Report Details"}),e.jsxs(r,{children:[e.jsx(lt,{sale:t,onPaymentSuccess:J,disabled:t.status=="cancelled"||t.status=="completed"}),e.jsx(F,{variant:"outlined",color:"primary",startIcon:e.jsx(we,{}),onClick:S,sx:{mr:1},children:"Print"}),e.jsx(F,{variant:"outlined",color:"secondary",startIcon:e.jsx(et,{}),onClick:T,disabled:!1,children:"Create Credit Memo"})]})]}),e.jsxs(r,{ref:u,sx:{p:2},children:[e.jsxs(s,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(s,{item:!0,xs:12,md:12,children:e.jsx(r,{sx:{textAlign:"center",mb:2},children:e.jsx(n,{variant:"h4",children:"DELIVERY REPORT"})})}),e.jsxs(s,{item:!0,xs:12,md:12,sx:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(r,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[e.jsx(n,{variant:"h5",children:"Halifax Glass & Aluminum Supply"}),e.jsx(n,{children:"Malagamot Road, Panacan"}),e.jsx(n,{children:"glasshalifax@gmail.com"}),e.jsx(n,{children:"0939 924 3876"})]}),e.jsxs(r,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[e.jsxs(n,{children:[e.jsx("strong",{children:"Order Date:"})," ",ge(t.order_date)]}),e.jsxs(n,{children:[e.jsx("strong",{children:"Delivery Date:"})," ",ge(t.delivery_date)]}),e.jsxs(n,{children:[e.jsx("strong",{children:"Payment Method:"})," ",t.payment_method.toUpperCase()]}),e.jsxs(n,{children:[e.jsx("strong",{children:"Status:"})," ",t.status.toUpperCase()]})]})]})]}),e.jsxs(s,{container:!0,spacing:2,justifyContent:"space-between",alignItems:"flex-start",children:[e.jsx(s,{item:!0,xs:6,md:6,children:e.jsxs(r,{sx:{mb:1},children:[e.jsxs(n,{children:[e.jsx("strong",{children:" Delivered to:"}),"  ",((ce=t.customer)==null?void 0:ce.business_name)||((xe=t.customer)==null?void 0:xe.customer_name)]}),e.jsxs(n,{children:[e.jsx("strong",{children:"Address:"}),"  ",((he=t.customer)==null?void 0:he.business_address)||t.address]}),e.jsxs(n,{children:[e.jsx("strong",{children:"City:"}),"  ",t.city]}),e.jsxs(n,{children:[e.jsx("strong",{children:"Phone:"}),"  ",t.phone]})]})}),e.jsx(s,{item:!0,xs:6,md:6,children:e.jsxs(r,{sx:{textAlign:"right"},children:[e.jsxs(n,{variant:"h6",children:[e.jsx("strong",{children:"DR #:"})," ",t.invoice_number]}),t.term_days!==0&&t.term_days&&e.jsx(e.Fragment,{children:e.jsxs(n,{variant:"h6",children:[e.jsx("strong",{children:"Term :"})," ",t.term_days]})})]})})]}),e.jsx(ne,{sx:{my:1}}),e.jsx(n,{variant:"subtitle1",gutterBottom:!0,children:"Order Items"}),e.jsx(V,{component:H,variant:"outlined",sx:{mb:2},children:e.jsxs($,{size:"small",children:[e.jsx(Q,{children:e.jsxs(k,{children:[e.jsx(i,{children:"Item"}),e.jsx(i,{children:"Code"}),e.jsx(i,{align:"right",children:"Price"}),e.jsx(i,{align:"center",children:"Qty"}),e.jsx(i,{align:"right",children:"Discount (%)"}),e.jsx(i,{align:"right",children:"Subtotal"})]})}),e.jsx(N,{children:t.items.map(p=>{var P,O;const D=parseFloat(p.sold_price)*p.quantity,I=D*(parseFloat(p.discount)/100),M=D-I;return e.jsxs(k,{children:[e.jsx(i,{children:(P=p.product)==null?void 0:P.product_name}),e.jsx(i,{children:(O=p.product)==null?void 0:O.product_code}),e.jsxs(i,{align:"right",children:["₱",parseFloat(p.sold_price).toFixed(2)]}),e.jsx(i,{align:"center",children:p.quantity}),e.jsxs(i,{align:"right",children:[parseFloat(p.discount).toFixed(2),"%"]}),e.jsxs(i,{align:"right",children:["₱",M.toFixed(2)]})]},p.id)})})]})}),e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(r,{sx:{display:"flex",flexDirection:"column",justifyContent:"flex-start"},children:[e.jsxs(n,{children:[e.jsx("strong",{children:"Delivery Status:"})," ",t.is_delivered?"Delivered":"Pending Delivery"]}),e.jsxs(n,{children:[e.jsx("strong",{children:"Encoded By:"})," ",(me=t.user)==null?void 0:me.name]})]}),e.jsx(r,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsxs(s,{container:!0,spacing:0,sx:{maxWidth:"400px"},children:[e.jsx(s,{item:!0,xs:6,children:e.jsx(n,{align:"right",children:"Subtotal:"})}),e.jsx(s,{item:!0,xs:6,children:e.jsxs(n,{align:"right",children:["₱",x.toFixed(2)]})}),e.jsx(s,{item:!0,xs:6,children:e.jsx(n,{align:"right",children:"Discount:"})}),e.jsx(s,{item:!0,xs:6,children:e.jsxs(n,{align:"right",children:["₱",q.toFixed(2)]})}),t.returns&&t.returns.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(s,{item:!0,xs:6,children:e.jsx(n,{variant:"body2",align:"right",onClick:G,sx:{cursor:"pointer",color:"primary.main","&:hover":{textDecoration:"underline"}},children:"Credit Memo Total:"})}),e.jsx(s,{item:!0,xs:6,children:e.jsxs(n,{variant:"body2",align:"right",onClick:G,sx:{cursor:"pointer",color:"primary.main","&:hover":{textDecoration:"underline"}},children:["₱",Z.toFixed(2)]})})]}),e.jsx(s,{item:!0,xs:6,children:e.jsx(n,{fontWeight:"bold",align:"right",children:"Total Amount:"})}),e.jsx(s,{item:!0,xs:6,children:e.jsxs(n,{fontWeight:"bold",align:"right",children:["₱",X.toFixed(2)]})}),t.amount_received!=="0.00"&&t.amount_received&&e.jsxs(e.Fragment,{children:[e.jsx(s,{item:!0,xs:6,children:e.jsx(n,{align:"right",children:"Amount Received:"})}),e.jsx(s,{item:!0,xs:6,children:e.jsxs(n,{align:"right",children:["₱",parseFloat(t.amount_received).toFixed(2)]})})]}),t.change!=="0.00"&&t.change&&e.jsxs(e.Fragment,{children:[e.jsx(s,{item:!0,xs:6,children:e.jsx(n,{align:"right",children:"Change:"})}),e.jsx(s,{item:!0,xs:6,children:e.jsxs(n,{align:"right",children:["₱",parseFloat(t.change).toFixed(2)," ",typeof t.change]})})]})]})})]}),t.remarks&&e.jsxs(r,{sx:{mt:3},children:[e.jsx(n,{children:"Remarks:"}),e.jsx(n,{variant:"body2",children:t.remarks})]}),e.jsxs(s,{container:!0,spacing:2,sx:{mt:4,px:2,display:"flex",justifyContent:"space-between"},children:[e.jsx(s,{item:!0,xs:2.4,children:e.jsx(r,{sx:{borderTop:"1px solid #000",pt:1,textAlign:"center"},children:e.jsx(n,{children:"Prepared By"})})}),e.jsx(s,{item:!0,xs:2.4,children:e.jsx(r,{sx:{borderTop:"1px solid #000",pt:1,textAlign:"center"},children:e.jsx(n,{children:"Checked By"})})}),e.jsx(s,{item:!0,xs:2.4,children:e.jsx(r,{sx:{borderTop:"1px solid #000",pt:1,textAlign:"center"},children:e.jsx(n,{children:"Released By"})})})]}),e.jsxs(s,{container:!0,spacing:2,sx:{mt:4,px:2,display:"flex",justifyContent:"center",gap:30},children:[e.jsx(s,{item:!0,xs:2.4,children:e.jsx(r,{sx:{borderTop:"1px solid #000",pt:1,textAlign:"center"},children:e.jsx(n,{children:"Delivered By"})})}),e.jsx(s,{item:!0,xs:2.4,children:e.jsx(r,{sx:{borderTop:"1px solid #000",pt:1,textAlign:"center"},children:e.jsx(n,{children:"Received By"})})})]})]})]}),e.jsx(r,{sx:{mt:3,mb:2},children:e.jsx(F,{variant:"text",color:"primary",onClick:K,startIcon:a?e.jsx(st,{}):e.jsx(Ne,{}),children:a?"Hide Payment History":"Show Payment History"})}),a&&e.jsx(r,{sx:{mt:2},children:e.jsx(ot,{sale:t,onPaymentUpdate:J,setSelectedReceipt:R})}),_&&e.jsx(se,{open:!!_,onClose:()=>R(null),maxWidth:"md",fullWidth:!0,children:e.jsx(He,{receipt:_,onClose:()=>R(null)})}),e.jsx(it,{open:l,onClose:A,returnItems:C,handleReturnQuantityChange:U,returnReason:v,setReturnReason:f,handleSubmitCreditMemo:Y,returns:t.returns}),t.returns&&t.returns.length>0&&e.jsx(rt,{open:w,onClose:ie,returns:t.returns,report:t})]})},ct=()=>{const d=t=>Array(t).fill(0).map((l,h)=>e.jsxs(k,{children:[e.jsx(i,{children:e.jsx(o,{animation:"wave",height:24})}),e.jsx(i,{children:e.jsx(o,{animation:"wave",height:24})}),e.jsx(i,{align:"right",children:e.jsx(o,{animation:"wave",height:24})}),e.jsx(i,{align:"center",children:e.jsx(o,{animation:"wave",height:24})}),e.jsx(i,{align:"right",children:e.jsx(o,{animation:"wave",height:24})}),e.jsx(i,{align:"right",children:e.jsx(o,{animation:"wave",height:24})})]},h));return e.jsxs(H,{elevation:2,sx:{p:3,mb:3},children:[e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(o,{animation:"wave",height:40,width:"40%"}),e.jsx(r,{children:e.jsx(o,{animation:"wave",variant:"rectangular",width:170,height:36,sx:{borderRadius:1}})})]}),e.jsxs(r,{sx:{p:2},children:[e.jsxs(s,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(s,{item:!0,xs:12,md:12,children:e.jsx(r,{sx:{textAlign:"center",mb:2},children:e.jsx(o,{animation:"wave",height:50,width:"50%",sx:{mx:"auto"}})})}),e.jsxs(s,{item:!0,xs:12,md:12,sx:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(r,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[e.jsx(o,{animation:"wave",height:30,width:200}),e.jsx(o,{animation:"wave",height:20,width:180}),e.jsx(o,{animation:"wave",height:20,width:160}),e.jsx(o,{animation:"wave",height:20,width:140})]}),e.jsxs(r,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[e.jsx(o,{animation:"wave",height:20,width:150}),e.jsx(o,{animation:"wave",height:20,width:150}),e.jsx(o,{animation:"wave",height:20,width:150}),e.jsx(o,{animation:"wave",height:20,width:150})]})]})]}),e.jsxs(s,{container:!0,spacing:2,justifyContent:"space-between",alignItems:"flex-start",children:[e.jsx(s,{item:!0,xs:6,md:6,children:e.jsxs(r,{sx:{mb:1},children:[e.jsx(o,{animation:"wave",height:24,width:"80%"}),e.jsx(o,{animation:"wave",height:20,width:"70%"}),e.jsx(o,{animation:"wave",height:20,width:"50%"}),e.jsx(o,{animation:"wave",height:20,width:"60%"})]})}),e.jsx(s,{item:!0,xs:6,md:6,children:e.jsxs(r,{sx:{textAlign:"right"},children:[e.jsx(o,{animation:"wave",height:24,width:"60%",sx:{ml:"auto"}}),e.jsx(o,{animation:"wave",height:24,width:"40%",sx:{ml:"auto"}})]})})]}),e.jsx(ne,{sx:{my:1}}),e.jsx(o,{animation:"wave",height:28,width:"20%",sx:{mb:1}}),e.jsx(V,{component:H,variant:"outlined",sx:{mb:2},children:e.jsxs($,{size:"small",children:[e.jsx(Q,{children:e.jsxs(k,{children:[e.jsx(i,{children:e.jsx(o,{animation:"wave",height:24})}),e.jsx(i,{children:e.jsx(o,{animation:"wave",height:24})}),e.jsx(i,{align:"right",children:e.jsx(o,{animation:"wave",height:24})}),e.jsx(i,{align:"center",children:e.jsx(o,{animation:"wave",height:24})}),e.jsx(i,{align:"right",children:e.jsx(o,{animation:"wave",height:24})}),e.jsx(i,{align:"right",children:e.jsx(o,{animation:"wave",height:24})})]})}),e.jsx(N,{children:d(5)})]})}),e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(r,{sx:{display:"flex",flexDirection:"column",justifyContent:"flex-start"},children:[e.jsx(o,{animation:"wave",height:20,width:160}),e.jsx(o,{animation:"wave",height:20,width:140})]}),e.jsx(r,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsxs(s,{container:!0,spacing:0,sx:{maxWidth:"400px"},children:[e.jsx(s,{item:!0,xs:6,children:e.jsx(o,{animation:"wave",height:20,width:"80%",sx:{ml:"auto"}})}),e.jsx(s,{item:!0,xs:6,children:e.jsx(o,{animation:"wave",height:20,width:"60%",sx:{ml:"auto"}})}),e.jsx(s,{item:!0,xs:6,children:e.jsx(o,{animation:"wave",height:20,width:"80%",sx:{ml:"auto"}})}),e.jsx(s,{item:!0,xs:6,children:e.jsx(o,{animation:"wave",height:20,width:"60%",sx:{ml:"auto"}})}),e.jsx(s,{item:!0,xs:6,children:e.jsx(o,{animation:"wave",height:24,width:"90%",sx:{ml:"auto"}})}),e.jsx(s,{item:!0,xs:6,children:e.jsx(o,{animation:"wave",height:24,width:"70%",sx:{ml:"auto"}})})]})})]}),e.jsxs(s,{container:!0,spacing:2,sx:{mt:4,px:2,display:"flex",justifyContent:"space-between"},children:[e.jsx(s,{item:!0,xs:2.4,children:e.jsx(r,{sx:{borderTop:"1px solid #e0e0e0",pt:1,textAlign:"center"},children:e.jsx(o,{animation:"wave",height:20,width:"80%",sx:{mx:"auto"}})})}),e.jsx(s,{item:!0,xs:2.4,children:e.jsx(r,{sx:{borderTop:"1px solid #e0e0e0",pt:1,textAlign:"center"},children:e.jsx(o,{animation:"wave",height:20,width:"80%",sx:{mx:"auto"}})})}),e.jsx(s,{item:!0,xs:2.4,children:e.jsx(r,{sx:{borderTop:"1px solid #e0e0e0",pt:1,textAlign:"center"},children:e.jsx(o,{animation:"wave",height:20,width:"80%",sx:{mx:"auto"}})})})]}),e.jsxs(s,{container:!0,spacing:2,sx:{mt:4,px:2,display:"flex",justifyContent:"center",gap:30},children:[e.jsx(s,{item:!0,xs:2.4,children:e.jsx(r,{sx:{borderTop:"1px solid #e0e0e0",pt:1,textAlign:"center"},children:e.jsx(o,{animation:"wave",height:20,width:"80%",sx:{mx:"auto"}})})}),e.jsx(s,{item:!0,xs:2.4,children:e.jsx(r,{sx:{borderTop:"1px solid #e0e0e0",pt:1,textAlign:"center"},children:e.jsx(o,{animation:"wave",height:20,width:"80%",sx:{mx:"auto"}})})})]})]})]})},At=()=>{const{id:d}=Ae(),t=Me(),l=fe(),[h,w]=m.useState(!0),[g,C]=m.useState(null),{getSaleById:c}=ve(),v=async(b,u=!1)=>{u||w(!0);try{const a=await c(b);if(a)C(a);else return console.error("Delivery report not found"),null}catch(a){return console.error("Error fetching delivery report:",a),null}u||w(!1)};m.useEffect(()=>{(async()=>{var u;if((u=t.state)!=null&&u.reportData){C(t.state.reportData),w(!1);return}d&&v(d)})()},[d,t.state]);const f=()=>{l("/app/sales-list")};return e.jsxs(Le,{maxWidth:"xxl",sx:{mt:4,mb:4},children:[e.jsxs(ke,{sx:{mb:2},children:[e.jsxs(ue,{underline:"hover",color:"inherit",sx:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>l("/app/dashboard"),children:[e.jsx(De,{style:{marginRight:8}}),"Dashboard"]}),e.jsxs(ue,{underline:"hover",color:"inherit",sx:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>l("/app/sales-list"),children:[e.jsx(Ye,{style:{marginRight:8}}),"Sales"]}),e.jsx(n,{color:"text.primary",children:"Delivery Report"})]}),e.jsx(r,{sx:{mb:2},children:e.jsx(F,{variant:"outlined",startIcon:e.jsx(Ve,{}),onClick:f,children:"Back to Sales"})}),h?e.jsx(ct,{}):g?e.jsx(dt,{refresh:v,report:g}):e.jsxs(H,{sx:{p:3,textAlign:"center"},children:[e.jsx(n,{variant:"h6",color:"error",children:"Delivery report not found or could not be loaded"}),e.jsx(F,{variant:"contained",sx:{mt:2},onClick:f,children:"Go to Sales List"})]})]})};export{At as default};
